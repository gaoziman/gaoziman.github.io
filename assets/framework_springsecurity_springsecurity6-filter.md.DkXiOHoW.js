import{_ as r,B as s,o as a,c as n,j as t,a as o,G as l,a8 as c}from"./chunks/framework.D0fTRY1a.js";const y=JSON.parse('{"title":"SpringSecurity6 | å›é¡¾Filter","description":"","frontmatter":{},"headers":[],"relativePath":"framework/springsecurity/springsecurity6-filter.md","filePath":"framework/springsecurity/springsecurity6-filter.md","lastUpdated":null}'),p={name:"framework/springsecurity/springsecurity6-filter.md"};function d(h,e,g,u,m,S){const i=s("ArticleMetadata");return a(),n("div",null,[e[0]||(e[0]=t("h1",{id:"springsecurity6-å›é¡¾filter",tabindex:"-1"},[o("SpringSecurity6 | å›é¡¾Filter "),t("a",{class:"header-anchor",href:"#springsecurity6-å›é¡¾filter","aria-label":'Permalink to "SpringSecurity6 | å›é¡¾Filter"'},"â€‹")],-1)),l(i),e[1]||(e[1]=c(`<p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202310302354916.png" alt="image-20231030235443828" loading="lazy"></p><h2 id="_1-å‰è¨€" tabindex="-1">1.å‰è¨€ <a class="header-anchor" href="#_1-å‰è¨€" aria-label="Permalink to &quot;1.å‰è¨€&quot;">â€‹</a></h2><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Leoå“¥ğŸ«£ğŸ«£ğŸ«£ï¼Œä¸Šä¸€èŠ‚æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªHelloWorldæ¡ˆä¾‹ï¼Œä»¥ä»£ç çš„æ–¹å¼å®ç°äº†æˆ‘ä»¬é¡¹ç›®æ·»åŠ ç™»å½•é‰´æƒåŠŸèƒ½ï¼Œåªæ˜¯é€šè¿‡ä¸€ä¸ªå°±è½»æ¾å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚é‚£ä¹ˆä»–å…¶ä¸­çš„åŸç†æ˜¯ä»€ä¹ˆå‘¢ï¼Œå¸¦ç€ç–‘é—®ï¼Œæˆ‘ä»¬åé¢å‡ èŠ‚è¯¾ä¸»è¦å­¦ä¹ ä¸€ä¸‹å¦‚ä½•å®ç°è¿™äº›çš„åŸç†ã€‚å¥½äº†ï¼Œè¯ä¸å¤šè¯´è®©æˆ‘ä»¬å¼€å§‹å§ğŸ˜ğŸ˜ğŸ˜ã€‚</p><h2 id="_2-é—ç•™é—®é¢˜" tabindex="-1">2.é—ç•™é—®é¢˜ <a class="header-anchor" href="#_2-é—ç•™é—®é¢˜" aria-label="Permalink to &quot;2.é—ç•™é—®é¢˜&quot;">â€‹</a></h2><ol><li>åœ¨å¼•å…¥SpringSecurityä¾èµ–åï¼Œä¸ºä»€ä¹ˆæ‰€æœ‰è¯·æ±‚å°±éœ€è¦å…ˆåšç™»å½•è®¤è¯äº†å‘¢?</li><li>ç™»å½•é¡µé¢æ˜¯æ€ä¹ˆäº§ç”Ÿçš„?</li><li>ç™»å½•é¡µé¢å¯ä»¥è‡ªå®šä¹‰å—?</li></ol><p><strong>åé¢å‡ ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬ä¼šå¸¦ç€è¿™äº›é—®é¢˜å»ç ”ç©¶SpringSecurityï¼Œå¹¶æ‰¾å‡ºé—®é¢˜çš„ç­”æ¡ˆã€‚</strong></p><h2 id="_3-è¯·æ±‚æµç¨‹" tabindex="-1">3.è¯·æ±‚æµç¨‹ <a class="header-anchor" href="#_3-è¯·æ±‚æµç¨‹" aria-label="Permalink to &quot;3.è¯·æ±‚æµç¨‹&quot;">â€‹</a></h2><p>ä¸€ä¸ªè¯·æ±‚å‘å‡ºä¹‹åçš„åŸºæœ¬æµç¨‹æ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Œæˆ‘ä»¬çš„è¯·æ±‚æ˜¯å¦‚ä½•è¢«æ‹¦æˆªçš„å‘¢ï¼Œä¸‹é¢æˆ‘ä»¬ç®€å•çš„æ¥çœ‹ä¸€ä¸‹æµç¨‹å›¾ã€‚</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202311052218806.png" alt="image-20231105221856734" loading="lazy"></p><p><strong>æµç¨‹è¯¦è§£ï¼š</strong></p><ol><li>å®¢æˆ·ç«¯é€šè¿‡æµè§ˆå™¨æˆ–å…¶ä»–æ–¹å¼å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œ<strong>SpringSecurity</strong>ä¼šæ‹¦æˆªè¯¥è¯·æ±‚ï¼Œå¹¶å°†å…¶äº¤ç»™å®‰å…¨è¿‡æ»¤å™¨é“¾è¿›è¡Œå¤„ç†ã€‚</li><li>å®‰å…¨è¿‡æ»¤å™¨é“¾æ˜¯<strong>SpringSecurity</strong>çš„æ ¸å¿ƒç»„ä»¶ï¼Œç”±å¤šä¸ª**è¿‡æ»¤å™¨(Filter)**ç»„æˆã€‚æ¯ä¸ªè¿‡æ»¤å™¨éƒ½æœ‰ç‰¹å®šçš„åŠŸèƒ½ï¼Œä¾‹å¦‚èº«ä»½éªŒè¯ã€æˆæƒã€ä¼šè¯ç®¡ç†ç­‰ã€‚åœ¨å¤„ç†è¯·æ±‚æ—¶ï¼Œå®‰å…¨è¿‡æ»¤å™¨é“¾ä¼šæŒ‰ç…§é¢„å®šä¹‰çš„é¡ºåºä¾æ¬¡è°ƒç”¨å„ä¸ªè¿‡æ»¤å™¨ï¼Œç›´åˆ°æœ€åä¸€ä¸ªè¿‡æ»¤å™¨å®Œæˆå¤„ç†ã€‚</li><li>èº«ä»½éªŒè¯æ˜¯SpringSecurityä¸­çš„ä¸€ä¸ªé‡è¦åŠŸèƒ½ï¼Œå®ƒèƒ½å¤ŸéªŒè¯è¯·æ±‚çš„å‘èµ·è€…æ˜¯å¦å…·æœ‰è®¿é—®å—ä¿æŠ¤èµ„æºçš„æƒé™ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç”¨æˆ·åå’Œå¯†ç æ¥éªŒè¯èº«ä»½ã€‚åœ¨å®‰å…¨è¿‡æ»¤å™¨é“¾ä¸­ï¼Œå¦‚æœå­˜åœ¨èº«ä»½éªŒè¯ç›¸å…³çš„è¿‡æ»¤å™¨ï¼Œåˆ™ä¼šè‡ªåŠ¨è¿›è¡Œèº«ä»½éªŒè¯æ“ä½œï¼Œä¾‹å¦‚<strong>UsernamePasswordAuthenticationFilter</strong>ã€‚</li><li>å¦‚æœè¯·æ±‚é€šè¿‡äº†èº«ä»½éªŒè¯å’Œæˆæƒæ“ä½œï¼Œ<strong>SpringSecurity</strong>ä¼šå°†è¯·æ±‚è½¬å‘ç»™å—ä¿æŠ¤èµ„æºï¼Œå¹¶è¿”å›ç›¸åº”çš„å“åº”ï¼›å¦åˆ™ï¼Œä¼šè¿”å›ç›¸åº”çš„é”™è¯¯ä¿¡æ¯æˆ–è€…ç›´æ¥è·³è½¬ç™»å½•é¡µé¢ã€‚</li></ol><p><strong>SpringSecurityå¯¹äºServletçš„æ”¯æŒæ˜¯åŸºäºServlet Filterçš„ã€‚ä¹Ÿå°±æ˜¯è¯´SpringSecurityçš„å®ç°æŠ€æœ¯æ‰‹æ®µä¹Ÿæ˜¯Filterã€‚</strong></p><h2 id="_4-å›é¡¾filter" tabindex="-1">4.å›é¡¾Filter <a class="header-anchor" href="#_4-å›é¡¾filter" aria-label="Permalink to &quot;4.å›é¡¾Filter&quot;">â€‹</a></h2><h3 id="_4-1è¿‡æ»¤å™¨å›é¡¾" tabindex="-1">4.1è¿‡æ»¤å™¨å›é¡¾ <a class="header-anchor" href="#_4-1è¿‡æ»¤å™¨å›é¡¾" aria-label="Permalink to &quot;4.1è¿‡æ»¤å™¨å›é¡¾&quot;">â€‹</a></h3><p>SpringSecurity çš„ Servlet æ”¯æŒæ˜¯åŸºäº Servlet Filter çš„ï¼Œå› æ­¤é¦–å…ˆå¤§è‡´äº†è§£ä¸€ä¸‹ <strong>Filter</strong> çš„ä½œç”¨æ˜¯æœ‰å¸®åŠ©çš„ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†å•ä¸ª <strong>HTTPè¯·æ±‚</strong>çš„å¤„ç†ç¨‹åºçš„å…¸å‹åˆ†å±‚ã€‚</p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202311052223465.png" alt="image-20231105222301402" style="zoom:25%;"><p>å®¢æˆ·ç«¯å‘åº”ç”¨ç¨‹åºå‘é€è¯·æ±‚ï¼Œå®¹å™¨åˆ›å»ºä¸€ä¸ª <code>FilterChain</code> ï¼Œå…¶ä¸­åŒ…å« <code>Filter</code> å®ä¾‹å’Œåº”å¤„ç† <code>HttpServletRequest</code> æ˜¯ <code>DispatcherServlet</code> çš„å®ä¾‹ã€‚æœ€å¤šä¸€ä¸ª <code>Servlet</code> å¯ä»¥å¤„ç†å•ä¸ª <code>HttpServletRequest</code> å’Œ <code>HttpServletResponse</code> ã€‚ç„¶è€Œï¼Œå¤šä¸ª <code>Filter</code> å¯ç”¨äºï¼š</p><ul><li>Prevent downstream <code>Filter</code> instances or the <code>Servlet</code> from being invoked. In this case, the <code>Filter</code> typically writes the <code>HttpServletResponse</code>. é˜²æ­¢è°ƒç”¨ä¸‹æ¸¸ <code>Filter</code> å®ä¾‹æˆ– <code>Servlet</code> ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ <code>Filter</code> é€šå¸¸å†™å…¥ <code>HttpServletResponse</code> ã€‚</li><li>Modify the <code>HttpServletRequest</code> or <code>HttpServletResponse</code> used by the downstream <code>Filter</code> instances and the <code>Servlet</code>. ä¿®æ”¹ä¸‹æ¸¸ <code>Filter</code> å®ä¾‹å’Œ <code>Servlet</code> ä½¿ç”¨çš„ <code>HttpServletRequest</code> æˆ– <code>HttpServletResponse</code> ã€‚</li></ul><h3 id="_4-2è¿‡æ»¤å™¨æ ¸å¿ƒ" tabindex="-1">4.2è¿‡æ»¤å™¨æ ¸å¿ƒ <a class="header-anchor" href="#_4-2è¿‡æ»¤å™¨æ ¸å¿ƒ" aria-label="Permalink to &quot;4.2è¿‡æ»¤å™¨æ ¸å¿ƒ&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ServletRequest request, ServletResponse response, FilterChain chain) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">	// do something before the rest of the application</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    chain.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">doFilter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(request, response); </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// invoke the rest of the application</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // do something after the rest of the application</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>ç”±äº <code>Filter</code> ä»…å½±å“ä¸‹æ¸¸ <code>Filter</code> å®ä¾‹å’Œ <code>Servlet</code> ï¼Œå› æ­¤è°ƒç”¨æ¯ä¸ª <code>Filter</code> çš„é¡ºåºéå¸¸é‡è¦ã€‚</p><h2 id="_5-è¿‡æ»¤å™¨åˆ†ç±»" tabindex="-1">5.è¿‡æ»¤å™¨åˆ†ç±» <a class="header-anchor" href="#_5-è¿‡æ»¤å™¨åˆ†ç±»" aria-label="Permalink to &quot;5.è¿‡æ»¤å™¨åˆ†ç±»&quot;">â€‹</a></h2><ol><li><strong>SecurityContextPersistenceFilterï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥ç¡®ä¿åœ¨æ•´ä¸ªè¯·æ±‚è¿‡ç¨‹ä¸­**SecurityContext(å®‰å…¨ä¸Šä¸‹æ–‡)**å¾—ä»¥ä¿ç•™å’Œä¼ é€’ã€‚SecurityContextä¸»è¦æ˜¯ç”¨æ¥å­˜å‚¨å½“å‰ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ã€è§’è‰²ã€æƒé™ç­‰ã€‚</li><li><strong>LogoutFilterï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥å¤„ç†ç”¨æˆ·æ³¨é”€è¯·æ±‚ï¼Œé€šå¸¸ä¼šæ¸…é™¤å½“å‰ç”¨æˆ·çš„èº«ä»½ä¿¡æ¯ã€‚</li><li><strong>UsernamePasswordAuthenticationFilterï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥å¤„ç†åŸºäºç”¨æˆ·åå’Œå¯†ç çš„èº«ä»½è®¤è¯è¯·æ±‚ã€‚</li><li><strong>RequestCacheAwareFilterï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥ç¼“å­˜è¯·æ±‚ï¼Œä»¥ä¾¿åç»­é‡å®šå‘è¯·æ±‚æ—¶å¯ä»¥æ­£ç¡®åœ°æ¢å¤è¯·æ±‚çŠ¶æ€ã€‚</li><li><strong>ExceptionTranslationFilterï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥å¤„ç†ç”±AccessDeniedHandlerå’ŒAuthenticationEntryPointæŠ›å‡ºçš„å¼‚å¸¸ï¼Œå°†å®ƒä»¬è½¬åŒ–ä¸ºåˆé€‚çš„HTTPå“åº”ã€‚</li><li><strong>FilterSecurityInterceptorï¼š</strong> è¯¥è¿‡æ»¤å™¨ç”¨æ¥è¿›è¡Œæˆæƒæ“ä½œï¼Œå†³å®šæ˜¯å¦å…è®¸ç”¨æˆ·è®¿é—®å—ä¿æŠ¤èµ„æºã€‚</li></ol><h2 id="_6-å‚è€ƒæ–‡çŒ®" tabindex="-1">6.å‚è€ƒæ–‡çŒ® <a class="header-anchor" href="#_6-å‚è€ƒæ–‡çŒ®" aria-label="Permalink to &quot;6.å‚è€ƒæ–‡çŒ®&quot;">â€‹</a></h2><ul><li><a href="https://docs.spring.io/spring-security/reference/servlet/architecture.html" target="_blank" rel="noreferrer">https://docs.spring.io/spring-security/reference/servlet/architecture.html</a></li></ul><h2 id="_7-æ€»ç»“" tabindex="-1">7.æ€»ç»“ <a class="header-anchor" href="#_7-æ€»ç»“" aria-label="Permalink to &quot;7.æ€»ç»“&quot;">â€‹</a></h2><p>ä»¥ä¸Šä¾¿æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œæœ¬äººæ‰ç–å­¦æµ…ï¼Œæ–‡ç« æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ä½¬ä»¬æ‰¹è¯„æŒ‡æ­£ï¼æˆ‘æ˜¯<strong>Leo</strong>ï¼Œä¸€ä¸ªåœ¨äº’è”ç½‘è¡Œä¸šçš„å°ç™½ï¼Œç«‹å¿—æˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº<strong>Leo</strong>ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·-ç¨‹åºå‘˜Leoï¼Œåé¢æ–‡ç« ä¼šé¦–å…ˆåŒæ­¥è‡³å…¬ä¼—å·ã€‚</p>`,28))])}const b=r(p,[["render",d]]);export{y as __pageData,b as default};
