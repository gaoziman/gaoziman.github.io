import{_ as n,B as e,o,c as t,j as s,a as p,G as l,a8 as r}from"./chunks/framework.D0fTRY1a.js";const b=JSON.parse('{"title":"SpringBoot常见注解","description":"","frontmatter":{},"headers":[],"relativePath":"interview/importance/common-annotations-for-springboot.md","filePath":"interview/importance/common-annotations-for-springboot.md","lastUpdated":null}'),c={name:"interview/importance/common-annotations-for-springboot.md"};function d(h,i,g,k,u,m){const a=e("ArticleMetadata");return o(),t("div",null,[i[0]||(i[0]=s("h1",{id:"springboot常见注解",tabindex:"-1"},[p("SpringBoot常见注解 "),s("a",{class:"header-anchor",href:"#springboot常见注解","aria-label":'Permalink to "SpringBoot常见注解"'},"​")],-1)),l(a),i[1]||(i[1]=r(`<h2 id="_1-springbootapplication" tabindex="-1">1. @SpringBootApplication <a class="header-anchor" href="#_1-springbootapplication" aria-label="Permalink to &quot;1. @SpringBootApplication&quot;">​</a></h2><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311241.png" alt="image-20231119150635401" loading="lazy"></p><p>定义在main方法入口类处，用于启动sping boot应用项目</p><h2 id="_2-springbootconfiguration" tabindex="-1">2. @SpringBootConfiguration <a class="header-anchor" href="#_2-springbootconfiguration" aria-label="Permalink to &quot;2. @SpringBootConfiguration&quot;">​</a></h2><p><code>@SpringBootConfiguration</code>注解是<code>@Configuration</code>注解的派生注解，用于标识一个类是Spring Boot应用的配置类。它通常用于定义配置信息、Bean的定义以及其他与应用配置相关的内容。</p><ol><li><strong>派生自<code>@Configuration</code>：</strong> <code>@SpringBootConfiguration</code>注解是<code>@Configuration</code>注解的派生注解。这意味着使用<code>@SpringBootConfiguration</code>标注的类将被Spring容器识别为配置类，可以用来定义bean、配置属性等。</li><li><strong>用于组织配置类：</strong> 在一个典型的Spring Boot应用中，你可能有多个配置类来组织不同部分的配置。使用<code>@SpringBootConfiguration</code>可以更清晰地表示这是一个SpringBoot的配置类。</li><li><strong>自动扫描：</strong> Spring Boot应用通常使用<code>@SpringBootApplication</code>注解来启动应用程序，并该注解本身包含<code>@SpringBootConfiguration</code>。因此，<code>@SpringBootConfiguration</code>标注的配置类会被自动扫描并加载到Spring容器中。</li><li><strong>与<code>@Configuration</code>的区别：</strong> 尽管<code>@SpringBootConfiguration</code>与<code>@Configuration</code>功能相似，但<code>@SpringBootConfiguration</code>通常更适用于Spring Boot应用，而<code>@Configuration</code>则是通用的Spring注解。使用<code>@SpringBootConfiguration</code>可以更好地表达应用是一个Spring Boot应用。</li></ol><p>下面是一个简单的例子，演示了<code>@SpringBootConfiguration</code>的使用：</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311248.png" alt="image-20231119150826025" loading="lazy"></p><p>在这个例子中，<code>MyConfiguration</code>被标记为<code>@SpringBootConfiguration</code>，并定义了一个名为<code>myBean</code>的bean。这个配置类将被Spring Boot自动扫描，并将<code>MyBean</code>注入到应用上下文中。</p><h2 id="_3-enableautoconfiguration" tabindex="-1">3. @EnableAutoConfiguration <a class="header-anchor" href="#_3-enableautoconfiguration" aria-label="Permalink to &quot;3. @EnableAutoConfiguration&quot;">​</a></h2><p><code>@EnableAutoConfiguration</code>用于启用自动配置机制。在SpringBoot应用中，许多常见的配置任务都可以通过自动配置来完成，而不需要显式地进行手动配置。<code>@EnableAutoConfiguration</code>注解就是用来启用这种自动配置的。</p><p>让SpringBoot根据类路径中的jar包依赖当前项目进行自动配置</p><ol><li><strong>自动配置：</strong> Spring Boot的自动配置通过在类路径上查找特定的条件类来实现。<code>@EnableAutoConfiguration</code>注解告诉Spring Boot去自动配置项目的类路径上所需的beans。</li><li><strong>条件化配置：</strong> 自动配置是条件化的，它只会在满足特定条件时才会应用。条件类（<code>@Conditional</code>注解的类）定义了这些条件。这使得自动配置可以根据项目的实际情况进行动态调整。</li><li><strong>元注解：</strong> <code>@EnableAutoConfiguration</code>是一个元注解，它本身包含了<code>@AutoConfigurationPackage</code>、<code>@Import(AutoConfigurationImportSelector.class)</code>等注解，用于导入自动配置的相关信息。</li><li><strong>自动配置导入选择器：</strong> <code>AutoConfigurationImportSelector</code>是一个重要的类，它根据项目的依赖关系和条件类的情况，确定应该导入哪些自动配置类。这个类实现了<code>ImportSelector</code>接口。</li><li><strong>禁用默认自动配置：</strong> 如果你想禁用某个特定的自动配置类，你可以使用<code>exclude</code>属性，例如：<code>@EnableAutoConfiguration(exclude = {DataSourceAutoConfiguration.class})</code>，这里禁用了数据源的自动配置。</li></ol><p>在src/main/resources的META-INF/spring.factories</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311245.png" alt="image-20231119150139206" loading="lazy"></p><p><strong>简单例子：</strong></p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311268.png" alt="image-20231119151158821" loading="lazy"></p><p>上面这个例子中，<code>@EnableAutoConfiguration</code>启用了SpringBoot的自动配置机制，而<code>@ComponentScan</code>用于扫描<code>com.example</code>包下的组件。SpringBoot将根据自动配置规则，自动配置项目所需的beans。</p><p>3.4 @ComponentScan</p><p><code>@ComponentScan</code>告诉Spring在指定的包或类路径下查找并注册标有<code>@Component</code>及其派生注解（如<code>@Service</code>、<code>@Repository</code>、<code>@Controller</code>等）的类作为Spring容器的bean。</p><p><strong>基本用法：</strong> <code>@ComponentScan</code>通常与<code>@Configuration</code>注解一起使用，以便在配置类中指定要扫描的基础包。例如：</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311222.png" alt="image-20231119151900537" loading="lazy"></p><p>在上面的例子中，<code>@ComponentScan</code>指定了要扫描的基础包为<code>com.example</code>。</p><p><strong>指定多个包：</strong> 你可以通过<code>basePackages</code>属性指定多个包，也可以使用<code>basePackageClasses</code>属性指定一组类，Spring将扫描这些包或类路径下的组件。</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311299.png" alt="image-20231119151934606" loading="lazy"></p><p><strong>包含和排除过滤：</strong> 通过<code>includeFilters</code>和<code>excludeFilters</code>属性，你可以进一步定义包含或排除特定条件的组件。例如，只包含带有<code>@MyAnnotation</code>注解的类：</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311650.png" alt="image-20231119152014735" loading="lazy"></p><p><strong>扫描默认规则：</strong> 如果不指定<code>basePackages</code>，<code>@ComponentScan</code>将默认扫描被注解类所在的包及其子包。这通常足以满足大多数应用的需求。</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202311192311734.png" alt="image-20231119152038106" loading="lazy"></p><p><strong>总结@ComponentScan的常用方式如下：</strong></p><ul><li>自定扫描路径下边带有@Controller，@Service，@Repository，@Component注解加入spring容器</li><li>通过includeFilters加入扫描路径下没有以上注解的类加入spring容器</li><li>通过excludeFilters过滤出不用加入spring容器的类</li><li>自定义增加了@Component注解的注解方式</li></ul><h2 id="_4-requestmapping简化注解" tabindex="-1">4. @RequestMapping简化注解 <a class="header-anchor" href="#_4-requestmapping简化注解" aria-label="Permalink to &quot;4. @RequestMapping简化注解&quot;">​</a></h2><ul><li>@GetMapping 等同于 @RequestMapping(method = RequestMethod.GET)</li><li>@PostMapping 等同于 @RequestMapping(method = RequestMethod.POST)</li><li>@PutMapping 等同于 @RequestMapping(method = RequestMethod.PUT)</li><li>@DeleteMapping 等同于 @RequestMapping(method = RequestMethod.DELETE)</li><li>@PatchMapping 等同于 @RequestMapping(method = RequestMethod.PATCH)</li></ul><h2 id="_5-profiles" tabindex="-1">5. @Profiles <a class="header-anchor" href="#_5-profiles" aria-label="Permalink to &quot;5. @Profiles&quot;">​</a></h2><p><code>@Profiles</code>是Spring框架中用于定义和激活配置文件**(profiles)**的注解。Profiles允许在不同的环境中使用不同的配置，这在开发、测试和生产等不同阶段非常有用。</p><p>以下是关于<code>@Profiles</code>注解的详细解释：</p><p>1.<strong>定义Profiles：</strong> 使用<code>@Profiles</code>注解可以将一个bean或者一个配置类限制在特定的环境中。你可以为<code>@Profiles</code>注解指定一个或多个环境（profile）的名称。</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;development&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DevelopmentDataSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Development environment specific configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>在上面的例子中，<code>DevelopmentDataSource</code> bean 只会在激活了名为&quot;development&quot;的profile时被注册到Spring容器中。</p><p>2.<strong>激活Profiles：</strong> 有几种方式可以激活特定的profiles：</p><p>在<code>application.properties</code>或<code>application.yml</code>文件中使用<code>spring.profiles.active</code>属性：</p><div class="language-yml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">spring.profiles.active=development</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在启动应用程序时通过命令行参数：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">java </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">jar your</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">application.jar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spring.profiles.active</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">development</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>在代码中通过<code>ConfigurableEnvironment</code>接口：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ConfigurableEnvironment environment </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> applicationContext.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getEnvironment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">environment.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setActiveProfiles</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;development&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3.<strong>默认Profiles：</strong> 你可以使用<code>default</code>关键字定义默认的profile。如果没有激活任何profile，那么默认profile中的bean将被注册到容器中。</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DefaultDataSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Default configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>4.<strong>组合Profiles：</strong> 通过使用逻辑运算符，你可以组合多个profiles。例如，要在同时激活&quot;development&quot;和&quot;test&quot;时注册一个bean：</p><div class="language-java vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Profile</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;development&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;test&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">})</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> CombinedDataSource</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Combined configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>@Profiles</code>注解允许你在不同的环境中使用不同的配置，提高了应用程序的灵活性和可移植性。</p><h2 id="_6-总结" tabindex="-1">6.总结 <a class="header-anchor" href="#_6-总结" aria-label="Permalink to &quot;6.总结&quot;">​</a></h2><p>以上便是本文的全部内容，本人才疏学浅，文章有什么错误的地方，欢迎大佬们批评指正！我是<strong>Leo</strong>，一个在互联网行业的小白，立志成为更好的自己。</p><p>如果你想了解更多关于<strong>Leo</strong>，可以关注公众号-程序员Leo，后面文章会首先同步至公众号。</p>`,54))])}const y=n(c,[["render",d]]);export{b as __pageData,y as default};
