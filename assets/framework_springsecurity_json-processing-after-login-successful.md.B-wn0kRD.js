import{_ as i,o as a,c as n,a7 as t}from"./chunks/framework.CU6B6cvq.js";const d=JSON.parse('{"title":"ç™»å½•æˆåŠŸåçš„JSONå¤„ç†","description":"","frontmatter":{"title":"ç™»å½•æˆåŠŸåçš„JSONå¤„ç†","order":15,"category":["springsecurity"],"tag":["springsecurity"],"pageview":false,"date":"2023-12-13T15:34:06.000Z","comment":false,"breadcrumb":false},"headers":[],"relativePath":"framework/springsecurity/json-processing-after-login-successful.md","filePath":"framework/springsecurity/json-processing-after-login-successful.md"}'),e={name:"framework/springsecurity/json-processing-after-login-successful.md"};function p(h,s,l,k,r,o){return a(),n("div",null,s[0]||(s[0]=[t(`<h1 id="springsecurity6-ç™»å½•æˆåŠŸåçš„jsonå¤„ç†" tabindex="-1">SpringSecurity6 | ç™»å½•æˆåŠŸåçš„JSONå¤„ç† <a class="header-anchor" href="#springsecurity6-ç™»å½•æˆåŠŸåçš„jsonå¤„ç†" aria-label="Permalink to &quot;SpringSecurity6 | ç™»å½•æˆåŠŸåçš„JSONå¤„ç†&quot;">â€‹</a></h1><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202312102158125.png" alt="image-20231030235443828"></p><h2 id="_1-å‰è¨€" tabindex="-1">1.å‰è¨€ <a class="header-anchor" href="#_1-å‰è¨€" aria-label="Permalink to &quot;1.å‰è¨€&quot;">â€‹</a></h2><p>å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯Leoå“¥ğŸ«£ğŸ«£ğŸ«£ï¼Œæ¥åˆ°<a href="https://gaoziman.blog.csdn.net/article/details/134864581" target="_blank" rel="noreferrer">ä¸Šä¸€èŠ‚</a>ï¼Œæˆ‘ä»¬å­¦ä¹ é€šè¿‡SpringSecurityç™»å½•æˆåŠŸä¹‹åçš„ä¸€äº›é¡µé¢çš„è·³è½¬ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬ä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹æˆ‘ä»¬é€šè¿‡è‡ªå®šä¹‰ç™»å½•ç•Œé¢ä¹‹åçš„ä¸€äº›ç»†èŠ‚å¤„ç†ã€‚å¥½äº†ï¼Œè¯ä¸å¤šè¯´è®©æˆ‘ä»¬å¼€å§‹å§ğŸ˜ğŸ˜ğŸ˜ã€‚</p><h2 id="_2-æ¦‚è¿°" tabindex="-1">2.æ¦‚è¿° <a class="header-anchor" href="#_2-æ¦‚è¿°" aria-label="Permalink to &quot;2.æ¦‚è¿°&quot;">â€‹</a></h2><p>åœ¨æˆ‘ä»¬ç°åœ¨æµè¡Œçš„å‰åç«¯åˆ†ç¦»å¼€å‘ä¸­ï¼Œå…¶å®åç«¯å·²ç»ä¸éœ€è¦å†è¿›è¡Œé¡µé¢çš„è·³è½¬ï¼Œå‰åç«¯æ•°æ®çš„äº¤æ¢éƒ½æ˜¯é€šè¿‡JSONæ¥è¿›è¡Œæµä¼ çš„ã€‚</p><p>å°±æ¯”å¦‚ï¼Œæˆ‘ä»¬åç«¯ç™»å½•ä¹‹åï¼Œåªéœ€è¦ç»™å‰ç«¯è¿”å›ä¸€æ®µJSONæ•°æ®ï¼Œå‘Šè¯‰å‰ç«¯ç™»å½•æˆåŠŸå³å¯ï¼Œå…·ä½“æ€ä¹ˆåšå‘¢ï¼Œæˆ‘ä»¬æ¥ç€å‘ä¸‹çœ‹ã€‚</p><h2 id="_3-jsonå¤„ç†" tabindex="-1">3.JSONå¤„ç† <a class="header-anchor" href="#_3-jsonå¤„ç†" aria-label="Permalink to &quot;3.JSONå¤„ç†&quot;">â€‹</a></h2><h3 id="_3-1-è‡ªå®šä¹‰handle" tabindex="-1">3.1 è‡ªå®šä¹‰Handle <a class="header-anchor" href="#_3-1-è‡ªå®šä¹‰handle" aria-label="Permalink to &quot;3.1 è‡ªå®šä¹‰Handle&quot;">â€‹</a></h3><p>é¦–å…ˆæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰<code>AuthenticationSuccessHandle</code>å¹¶å®ç°ä»–çš„ä¸€äº›æ–¹æ³•ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.javatop.custom.config;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> cn.hutool.core.lang.hash.Hash;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> com.fasterxml.jackson.databind.ObjectMapper;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jakarta.servlet.ServletException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jakarta.servlet.http.HttpServletRequest;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jakarta.servlet.http.HttpServletResponse;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.context.annotation.Configuration;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.security.core.Authentication;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> org.springframework.security.web.authentication.AuthenticationSuccessHandler;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.io.IOException;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> java.util.HashMap;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@author</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> : Leo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@version</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> 1.0</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * @date 2023-12-10 22:03</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * @description : å“åº”æˆåŠŸä¹‹åçš„JSON</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyAuthenticationSuccessHandle</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AuthenticationSuccessHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> onAuthenticationSuccess</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(HttpServletRequest </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">request</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, HttpServletResponse </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">response</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Authentication </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">authentication</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> IOException, ServletException {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        HashMap&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">String</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Object</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HashMap&lt;&gt;();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;msg&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç™»å½•æˆåŠŸ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">put</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;code&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setContentType</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;application/json;charset=utf-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ObjectMapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">writeValue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(response.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getWriter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), result);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_3-2-è¿›è¡Œé…ç½®" tabindex="-1">3.2 è¿›è¡Œé…ç½® <a class="header-anchor" href="#_3-2-è¿›è¡Œé…ç½®" aria-label="Permalink to &quot;3.2 è¿›è¡Œé…ç½®&quot;">â€‹</a></h3><p>åœ¨æˆ‘ä»¬çš„ **MvcCconfig **ä¸­è¿›è¡Œhandleré…ç½®ã€‚</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">successHandler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyAuthenticationSuccessHandle</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// æˆåŠŸä¹‹åçš„JSONå¤„ç†</span></span></code></pre></div><p>ç„¶åé‡å¯é¡¹ç›®ï¼Œè¿›è¡Œæµ‹è¯•ã€‚</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/LeoPic202312102208840.png" alt="image-20231210220826802"></p><p>è¿™ä¸ªå°±æ˜¯æˆ‘ä»¬åˆšå“åº”çš„JSONæ•°æ®ã€‚</p><h2 id="_4-æ€»ç»“" tabindex="-1">4.æ€»ç»“ <a class="header-anchor" href="#_4-æ€»ç»“" aria-label="Permalink to &quot;4.æ€»ç»“&quot;">â€‹</a></h2><p>ä»¥ä¸Šä¾¿æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œæœ¬äººæ‰ç–å­¦æµ…ï¼Œæ–‡ç« æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ä½¬ä»¬æ‰¹è¯„æŒ‡æ­£ï¼æˆ‘æ˜¯<strong>Leo</strong>ï¼Œä¸€ä¸ªåœ¨äº’è”ç½‘è¡Œä¸šçš„å°ç™½ï¼Œç«‹å¿—æˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº<strong>Leo</strong>ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·-ç¨‹åºå‘˜Leoï¼Œåé¢æ–‡ç« ä¼šé¦–å…ˆåŒæ­¥è‡³å…¬ä¼—å·ã€‚</p>`,20)]))}const c=i(e,[["render",p]]);export{d as __pageData,c as default};
