import{_ as i,o as a,c as n,a7 as p}from"./chunks/framework.CU6B6cvq.js";const g=JSON.parse('{"title":"Springé«˜çº§æ³¨è§£","description":"","frontmatter":{"title":"Springé«˜çº§æ³¨è§£","order":7,"tag":["springğŸƒ"],"category":["Springä¸“æ ğŸƒ"],"pageview":false,"date":"2023-10-22T16:51:56.000Z","comment":false},"headers":[],"relativePath":"framework/spring/spring5-annotation-code02.md","filePath":"framework/spring/spring5-annotation-code02.md"}'),l={name:"framework/spring/spring5-annotation-code02.md"};function t(h,s,k,e,E,r){return a(),n("div",null,s[0]||(s[0]=[p(`<h2 id="_1-å‰è¨€" tabindex="-1">1.å‰è¨€ <a class="header-anchor" href="#_1-å‰è¨€" aria-label="Permalink to &quot;1.å‰è¨€&quot;">â€‹</a></h2><p>ä¸Šä¸€ç¯‡åšå®¢æˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†ä¸€ä¸‹æœ‰å…³Springçš„åŸºç¡€ç³»åˆ—æ³¨è§£ï¼Œå¹¶é€šè¿‡ä¸€äº›æ¡ˆä¾‹æ¥è®¨è®ºä½¿ç”¨è¿™äº›åŸºç¡€æ³¨è§£æ¥ç®€åŒ–æˆ‘ä»¬çš„å¼€å‘ã€‚è¿™ç¯‡æ–‡ç« æˆ‘ä»¬å°†ç»§ç»­è®¨è®ºSpringé«˜çº§æ³¨è§£å¼€å‘ï¼Œæ›´æ·±å…¥åœ°äº†è§£è¿™äº›å¼ºå¤§çš„å·¥å…·å¦‚ä½•åŠ é€Ÿå¼€å‘è¿‡ç¨‹å¹¶æé«˜ä»£ç è´¨é‡ï¼Œå¥½äº†ï¼Œè¯ä¸å¤šè¯´ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ğŸ˜ğŸ˜ğŸ˜ã€‚</p><h2 id="_2-é…ç½®bean" tabindex="-1">2.é…ç½®Bean <a class="header-anchor" href="#_2-é…ç½®bean" aria-label="Permalink to &quot;2.é…ç½®Bean&quot;">â€‹</a></h2><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Springåœ¨3.xæä¾›çš„æ–°çš„æ³¨è§£ï¼Œç”¨äºæ›¿æ¢XMLé…ç½®æ–‡ä»¶ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>å¼€å‘æ­¥éª¤ï¼š</strong></p><blockquote><ol><li><strong>åˆ›å»ºé…ç½®ç±»</strong>ï¼šé¦–å…ˆï¼Œåˆ›å»ºä¸€ä¸ªJavaç±»ï¼Œå¹¶åœ¨å…¶ä¸Šæ ‡è®° @Configuration æ³¨è§£ï¼Œå°†å…¶å˜ä¸ºä¸€ä¸ªé…ç½®Beanã€‚</li><li><strong>ç¼–å†™é…ç½®ä»£ç </strong>ï¼šåœ¨é…ç½®ç±»ä¸­ï¼Œç¼–å†™Springé…ç½®ä»£ç ï¼ŒåŒ…æ‹¬Beanå®šä¹‰ã€ä¾èµ–æ³¨å…¥ç­‰ã€‚</li><li><strong>è¿›è¡Œæµ‹è¯•</strong>ï¼šç¼–å†™æµ‹è¯•ä»£ç æ¥éªŒè¯é…ç½®ç±»ä¸­çš„é…ç½®æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚</li></ol></blockquote><h3 id="_1-è®¨è®ºbean" tabindex="-1">1.è®¨è®ºBean <a class="header-anchor" href="#_1-è®¨è®ºbean" aria-label="Permalink to &quot;1.è®¨è®ºBean&quot;">â€‹</a></h3><p>é…ç½®Beanåœ¨åº”ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œæ›¿æ¢äº†XMLå…·ä½“ä»€ä¹ˆå†…å®¹å‘¢ï¼Ÿ</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291504739.png" alt="image-20200703100033265"></p><h3 id="_2-æ³¨è§£å·¥å‚" tabindex="-1">2.æ³¨è§£å·¥å‚ <a class="header-anchor" href="#_2-æ³¨è§£å·¥å‚" aria-label="Permalink to &quot;2.æ³¨è§£å·¥å‚&quot;">â€‹</a></h3><p><strong>AnnotationConfigApplicationContext</strong></p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä½¿ç”¨é…ç½®Beanä¹‹ååˆ›å»ºå·¥å‚çš„ä¸¤ç§æ–¹å¼ï¼š</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">   1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æŒ‡å®šé…ç½®beançš„Class</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       ApplicationContext ctx = new AnnotationConfigApplicationContext(AppConfig.class);</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">   2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æŒ‡å®šé…ç½®beanæ‰€åœ¨çš„è·¯å¾„ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       ApplicationContext ctx = new AnnotationConfigApplicationContext(&quot;org.javatop&quot;);</span></span></code></pre></div><h3 id="_3-ä½¿ç”¨é…ç½®beançš„æ³¨æ„äº‹é¡¹" tabindex="-1">3.ä½¿ç”¨é…ç½®Beançš„æ³¨æ„äº‹é¡¹ï¼š <a class="header-anchor" href="#_3-ä½¿ç”¨é…ç½®beançš„æ³¨æ„äº‹é¡¹" aria-label="Permalink to &quot;3.ä½¿ç”¨é…ç½®Beançš„æ³¨æ„äº‹é¡¹ï¼š&quot;">â€‹</a></h3><p>ä½¿ç”¨é…ç½®Beanä¹‹åæ— æ³•å†é›†æˆlog4jæ—¥å¿—æ¡†æ¶ï¼Œè€Œåº”è¯¥é›†æˆæ–°çš„æ—¥å¿—æ¡†æ¶logback</p><p>logbacké›†æˆå¼€å‘æ­¥éª¤ï¼š</p><h4 id="_3-1-å¼•å…¥ç›¸å…³jar" tabindex="-1">3.1 å¼•å…¥ç›¸å…³jar <a class="header-anchor" href="#_3-1-å¼•å…¥ç›¸å…³jar" aria-label="Permalink to &quot;3.1 å¼•å…¥ç›¸å…³jar&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.slf4j&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;slf4j-api&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.7.25&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.slf4j&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;jcl-over-slf4j&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.7.25&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ch.qos.logback&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;logback-classic&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.2.3&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;ch.qos.logback&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;logback-core&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;1.2.3&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;org.logback-extensions&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">groupId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;logback-ext-spring&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">artifactId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;0.1.4&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">dependency</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="_3-2-å¼•å…¥logbacké…ç½®æ–‡ä»¶" tabindex="-1">3.2 å¼•å…¥logbacké…ç½®æ–‡ä»¶ <a class="header-anchor" href="#_3-2-å¼•å…¥logbacké…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;3.2 å¼•å…¥logbacké…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>åœ¨Resourceç›®å½•ä¸‹é¢åˆ›å»ºlogback.xml</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;?</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">xml</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1.0&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> encoding</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UTF-8&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">?&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!-- æ§åˆ¶å°è¾“å‡º --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">appender</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;STDOUT&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">encoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            &lt;!--æ ¼å¼åŒ–è¾“å‡ºï¼š%dè¡¨ç¤ºæ—¥æœŸï¼Œ%threadè¡¨ç¤ºçº¿ç¨‹åï¼Œ%-5levelï¼šçº§åˆ«ä»å·¦æ˜¾ç¤º5ä¸ªå­—ç¬¦å®½åº¦%msgï¼šæ—¥å¿—æ¶ˆæ¯ï¼Œ%næ˜¯æ¢è¡Œç¬¦--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} - %msg%n&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">pattern</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">encoder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">appender</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">root</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> level</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DEBUG&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">appender-ref</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;STDOUT&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><ul><li><p>@Configurationæ³¨è§£çš„æœ¬è´¨</p><p>åœ¨ä¼ ç»Ÿçš„Springå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨XMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€ä¾èµ–å…³ç³»å’Œå…¶ä»–é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å¢åŠ ï¼ŒXMLé…ç½®æ–‡ä»¶å˜å¾—å†—é•¿ã€ç¹çï¼Œå¹¶ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†ç®€åŒ–é…ç½®ï¼ŒSpringå¼•å…¥äº†åŸºäºJavaçš„é…ç½®æ–¹å¼ï¼Œå³é€šè¿‡ç¼–å†™Javaç±»æ¥æä¾›é…ç½®ä¿¡æ¯ï¼Œè¿™å°±æ˜¯é…ç½®ç±»ã€‚</p><p><code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»è¢«ç§°ä¸ºé…ç½®ç±»ï¼Œå®ƒå……å½“äº†ä¼ ç»ŸXMLé…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚é…ç½®ç±»å¯ä»¥åŒ…å«ä¸€äº›ç‰¹æ®Šçš„æ³¨è§£å’Œæ–¹æ³•ï¼Œç”¨äºå£°æ˜å’Œå®šä¹‰Spring Beanä»¥åŠå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œ<code>@Configuration</code>æ³¨è§£å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€äº›ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“Springå®¹å™¨æ‰«æåˆ°è¢«<code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®ä¿¡æ¯åˆ›å»ºç›¸åº”çš„Beanå®šä¹‰ã€‚è¿™äº›é…ç½®ä¿¡æ¯å¯ä»¥åŒ…æ‹¬<code>@Bean</code>æ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼Œç”¨äºå®šä¹‰Beançš„åˆ›å»ºå’Œåˆå§‹åŒ–é€»è¾‘ã€‚åŒæ—¶ï¼Œé…ç½®ç±»è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£ï¼Œå¦‚<code>@ComponentScan</code>ã€<code>@Import</code>ç­‰ï¼Œæ¥è¿›ä¸€æ­¥å®šä¹‰å’Œå¼•å…¥å…¶ä»–çš„Beanå®šä¹‰å’Œé…ç½®ã€‚</p><p>é…ç½®ç±»çš„ä¼˜åŠ¿åœ¨äºå®ƒæä¾›äº†æ›´åŠ çµæ´»ã€å¯è¯»æ€§é«˜çš„é…ç½®æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨Javaè¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ï¼Œæ¥åŠ¨æ€åˆ›å»ºå’Œé…ç½®Beanã€‚åŒæ—¶ï¼Œé…ç½®ç±»çš„ç±»å‹å®‰å…¨æ€§æ›´é«˜ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹é…ç½®é”™è¯¯å’Œç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚é€šè¿‡é…ç½®ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥Javaç±»çš„å½¢å¼æ¥å®šä¹‰å’Œç®¡ç†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæä¾›äº†æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚</p><p><strong>ä¹Ÿæ˜¯@Componentæ³¨è§£çš„è¡ç”Ÿæ³¨è§£ï¼Œå¯ä»¥åº”ç”¨&lt;context:component-scanè¿›è¡Œæ‰«æã€‚</strong></p></li></ul><h2 id="_2-beanæ³¨è§£" tabindex="-1">2. @Beanæ³¨è§£ <a class="header-anchor" href="#_2-beanæ³¨è§£" aria-label="Permalink to &quot;2. @Beanæ³¨è§£&quot;">â€‹</a></h2><p><strong>@Bean</strong>æ³¨è§£åœ¨é…ç½®beanä¸­è¿›è¡Œä½¿ç”¨ï¼Œç­‰åŒäºXMLé…ç½®æ–‡ä»¶ä¸­çš„&lt;beanæ ‡ç­¾</p><h3 id="_2-1-beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨" tabindex="-1">2.1 @Beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨ <a class="header-anchor" href="#_2-1-beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;2.1 @Beanæ³¨è§£çš„åŸºæœ¬ä½¿ç”¨&quot;">â€‹</a></h3><h4 id="_1-ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢" tabindex="-1">1.ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢ <a class="header-anchor" href="#_1-ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢" aria-label="Permalink to &quot;1.ä»€ä¹ˆæ˜¯ç®€å•å¯¹è±¡ä»€ä¹ˆæ˜¯å¤æ‚å¯¹è±¡å‘¢&quot;">â€‹</a></h4><p>åœ¨Springä¸­ï¼Œç®€å•å¯¹è±¡å’Œå¤æ‚å¯¹è±¡æ˜¯ç›¸å¯¹çš„æ¦‚å¿µï¼Œç”¨äºæè¿°å¯¹è±¡çš„ç»“æ„å’Œå¤æ‚ç¨‹åº¦ã€‚</p><p><strong>ç®€å•å¯¹è±¡(Simple Object)</strong> é€šå¸¸æŒ‡çš„æ˜¯ç®€å•çš„æ•°æ®ç±»å‹æˆ–ç®€å•çš„<strong>POJO(Plain Old Java Object)</strong>ã€‚ç®€å•æ•°æ®ç±»å‹åŒ…æ‹¬åŸºæœ¬æ•°æ®ç±»å‹**(å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼ç­‰)<strong>ä»¥åŠå®ƒä»¬çš„åŒ…è£…ç±»å‹(<strong>å¦‚Integerã€Floatã€Booleanç­‰)</strong>ã€‚ç®€å•POJOæ˜¯æŒ‡æ²¡æœ‰å¤æ‚ä¸šåŠ¡é€»è¾‘å’Œä¾èµ–å…³ç³»çš„æ™®é€šJavaå¯¹è±¡ï¼Œé€šå¸¸åªåŒ…å«ä¸€äº›ç®€å•çš„å±æ€§å’Œå¯¹åº”çš„</strong>getter<strong>å’Œ</strong>setter**æ–¹æ³•ã€‚</p><p>å¤æ‚å¯¹è±¡ï¼ˆComplex Objectï¼‰é€šå¸¸æŒ‡çš„æ˜¯å…·æœ‰å¤æ‚ç»“æ„å’Œå…³è”å…³ç³»çš„å¯¹è±¡ã€‚è¿™äº›å¯¹è±¡å¯èƒ½åŒ…å«åµŒå¥—çš„å¯¹è±¡ã€é›†åˆæˆ–å…¶ä»–å¤æ‚ç±»å‹çš„å±æ€§ã€‚å¤æ‚å¯¹è±¡å¯èƒ½æ¶‰åŠåˆ°å¤šå±‚çº§çš„å…³ç³»ï¼Œéœ€è¦è¿›è¡Œä¾èµ–æ³¨å…¥ã€å…³è”å…³ç³»çš„ç®¡ç†å’Œä¸šåŠ¡é€»è¾‘çš„å¤„ç†ã€‚</p><p>åœ¨Springä¸­ï¼Œå¯¹äºç®€å•å¯¹è±¡ï¼Œé€šå¸¸å¯ä»¥ç›´æ¥ä½¿ç”¨åŸºæœ¬çš„ä¾èµ–æ³¨å…¥æ–¹å¼ï¼Œå¦‚é€šè¿‡<code>@Autowired</code>æ³¨è§£æ³¨å…¥ç®€å•çš„ä¾èµ–å¯¹è±¡ã€‚è€Œå¯¹äºå¤æ‚å¯¹è±¡ï¼Œé€šå¸¸éœ€è¦è¿›è¡Œæ›´å¤æ‚çš„é…ç½®å’Œç®¡ç†ï¼Œå¦‚é€šè¿‡XMLé…ç½®æ–‡ä»¶æˆ–æ³¨è§£é…ç½®ç›¸å…³çš„ä¾èµ–å…³ç³»ã€ä½¿ç”¨<code>@Qualifier</code>æ³¨è§£è§£å†³ä¾èµ–å¯¹è±¡çš„æ­§ä¹‰æ€§ã€ä½¿ç”¨<code>@Autowired</code>æ³¨è§£æ³¨å…¥é›†åˆç±»å‹çš„å±æ€§ç­‰ã€‚</p><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç®€å•å¯¹è±¡å’Œå¤æ‚å¯¹è±¡å¹¶æ²¡æœ‰ä¸¥æ ¼çš„å®šä¹‰å’Œç•Œé™ï¼Œå®ƒä»¬çš„åˆ’åˆ†ä¸»è¦æ˜¯ä¸ºäº†æè¿°å¯¹è±¡çš„å¤æ‚ç¨‹åº¦å’Œå¤„ç†æ–¹å¼ã€‚åœ¨å®é™…å¼€å‘ä¸­ï¼Œæ ¹æ®å…·ä½“çš„ä¸šåŠ¡éœ€æ±‚å’Œå¯¹è±¡çš„ç»“æ„ï¼Œå¯ä»¥çµæ´»åœ°é€‰æ‹©é€‚åˆçš„ä¾èµ–æ³¨å…¥æ–¹å¼å’Œé…ç½®æ–¹å¼ã€‚</p><p>ç®€å•æ¥è¯´ï¼š<strong>ç®€å•å¯¹è±¡å°±æ˜¯ç›´æ¥èƒ½å¤Ÿé€šè¿‡newæ–¹å¼åˆ›å»ºçš„å¯¹è±¡ï¼Œæ¯”å¦‚new User()ã€‚å¤æ‚å¯¹è±¡å°±æ˜¯ä¸èƒ½é€šè¿‡newçš„æ–¹å¼ç›´æ¥åˆ›å»ºçš„å¯¹è±¡ã€‚æ¯”å¦‚ Connection SqlSessionFactoryç­‰ç­‰</strong></p><h4 id="_2-ç®€å•å¯¹è±¡çš„åˆ›å»º" tabindex="-1">2.ç®€å•å¯¹è±¡çš„åˆ›å»º <a class="header-anchor" href="#_2-ç®€å•å¯¹è±¡çš„åˆ›å»º" aria-label="Permalink to &quot;2.ç®€å•å¯¹è±¡çš„åˆ›å»º&quot;">â€‹</a></h4><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202310221442630.png" alt="image-20231022144250397"></p><h4 id="_3-å¤æ‚å¯¹è±¡çš„åˆ›å»º" tabindex="-1">3.å¤æ‚å¯¹è±¡çš„åˆ›å»º <a class="header-anchor" href="#_3-å¤æ‚å¯¹è±¡çš„åˆ›å»º" aria-label="Permalink to &quot;3.å¤æ‚å¯¹è±¡çš„åˆ›å»º&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //@Bean åˆ›å»ºå¤æ‚å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //ä¸€èˆ¬ç”¨äºé—ç•™ç³»ç»Ÿæ•´åˆ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Connection </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conn1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Connection conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ConnectionFactoryBean factoryBean </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConnectionFactoryBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      conn </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> factoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getObject</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (Exception </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> conn;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><h4 id="_4-è‡ªå®šä¹‰idå€¼" tabindex="-1">4.è‡ªå®šä¹‰idå€¼ <a class="header-anchor" href="#_4-è‡ªå®šä¹‰idå€¼" aria-label="Permalink to &quot;4.è‡ªå®šä¹‰idå€¼&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h4 id="_5-æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°" tabindex="-1">5.æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•° <a class="header-anchor" href="#_5-æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°" aria-label="Permalink to &quot;5.æ§åˆ¶å¯¹è±¡åˆ›å»ºæ¬¡æ•°&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Scope</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;singleton|prototype&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) é»˜è®¤å€¼ singleton</span></span></code></pre></div><p>å½“æˆ‘ä»¬ä½¿ç”¨@Scopeæ³¨è§£çš„æ—¶å€™ï¼Œvalueå€¼ä¸ºsinletonæ—¶æˆ–è€…ä¸å¡«å†™@Socopeæ³¨è§£æ—¶ï¼ŒSpringåªä¼šä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå¯¹è±¡ã€‚å½“æˆ‘ä»¬valueå€¼ä¸ºprototypeï¼Œæ­¤æ—¶Springä¼šä¸ºæˆ‘ä»¬åˆ›å»ºå¤šä¸ªå¯¹è±¡ã€‚</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/Leo100/202310221455574.png" alt="image-20231022145500394"></p><h3 id="_2-2-beanæ³¨è§£çš„æ³¨å…¥" tabindex="-1">2.2 @Beanæ³¨è§£çš„æ³¨å…¥ <a class="header-anchor" href="#_2-2-beanæ³¨è§£çš„æ³¨å…¥" aria-label="Permalink to &quot;2.2 @Beanæ³¨è§£çš„æ³¨å…¥&quot;">â€‹</a></h3><h4 id="_1-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹" tabindex="-1">1. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹ <a class="header-anchor" href="#_1-ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹" aria-label="Permalink to &quot;1. ç”¨æˆ·è‡ªå®šä¹‰ç±»å‹&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//å¾…æ³¨å…¥å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserDAO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAOImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  //æ–¹å¼ä¸€ï¼šå¾…æ³¨å…¥å¯¹è±¡ä½œä¸ºå‚æ•°ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(UserDAO userDAO) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    UserServiceImpl userService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userDAO);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//æ–¹å¼äºŒï¼ˆç®€åŒ–ï¼‰ï¼šç›´æ¥è°ƒç”¨è¯¥æ–¹æ³•ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  UserServiceImpl userService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h4 id="_2-jdkç±»å‹çš„æ³¨å…¥" tabindex="-1">2. JDKç±»å‹çš„æ³¨å…¥ <a class="header-anchor" href="#_2-jdkç±»å‹çš„æ³¨å…¥" aria-label="Permalink to &quot;2. JDKç±»å‹çš„æ³¨å…¥&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Customer </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  Customer customer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  customer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  customer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xiaohei&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>JDKç±»å‹æ³¨å…¥ç»†èŠ‚åˆ†æï¼šå¦‚æœç›´æ¥åœ¨ä»£ç ä¸­è¿›è¡Œsetæ–¹æ³•çš„è°ƒç”¨ï¼Œä¼šå­˜åœ¨è€¦åˆçš„é—®é¢˜ï¼Œæ€ä¹ˆè§£å†³ï¼Ÿ</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PropertySource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;classpath:/init.properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${id}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Integer id;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${name}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String name;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Customer </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          Customer customer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Customer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          customer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(id);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          customer.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(name);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> customer;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><h2 id="_3-componentscanæ³¨è§£" tabindex="-1">3. @ComponentScanæ³¨è§£ <a class="header-anchor" href="#_3-componentscanæ³¨è§£" aria-label="Permalink to &quot;3. @ComponentScanæ³¨è§£&quot;">â€‹</a></h2><p><code>@Configuration</code>æ³¨è§£æ˜¯Springæ¡†æ¶ä¸­çš„ä¸€ä¸ªé‡è¦æ³¨è§£ï¼Œç”¨äºæ ‡è®°ä¸€ä¸ªç±»ä¸ºé…ç½®ç±»ã€‚é…ç½®ç±»æä¾›äº†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæ›¿ä»£äº†ä¼ ç»Ÿçš„XMLé…ç½®æ–‡ä»¶ã€‚åœ¨è¯¦ç»†è§£é‡Š<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹å®ƒçš„èƒŒæ™¯å’Œä½œç”¨ã€‚</p><p>åœ¨ä¼ ç»Ÿçš„Springå¼€å‘ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨XMLæ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºçš„ç»„ä»¶ã€ä¾èµ–å…³ç³»å’Œå…¶ä»–é…ç½®ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œéšç€åº”ç”¨ç¨‹åºçš„å¤æ‚æ€§å¢åŠ ï¼ŒXMLé…ç½®æ–‡ä»¶å˜å¾—å†—é•¿ã€ç¹çï¼Œå¹¶ä¸”å®¹æ˜“å‡ºé”™ã€‚ä¸ºäº†ç®€åŒ–é…ç½®ï¼ŒSpringå¼•å…¥äº†åŸºäºJavaçš„é…ç½®æ–¹å¼ï¼Œå³é€šè¿‡ç¼–å†™Javaç±»æ¥æä¾›é…ç½®ä¿¡æ¯ï¼Œè¿™å°±æ˜¯é…ç½®ç±»ã€‚</p><p><code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»è¢«ç§°ä¸ºé…ç½®ç±»ï¼Œå®ƒå……å½“äº†ä¼ ç»ŸXMLé…ç½®æ–‡ä»¶çš„æ›¿ä»£å“ï¼Œæä¾›äº†ä¸€ç§æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚é…ç½®ç±»å¯ä»¥åŒ…å«ä¸€äº›ç‰¹æ®Šçš„æ³¨è§£å’Œæ–¹æ³•ï¼Œç”¨äºå£°æ˜å’Œå®šä¹‰Spring Beanä»¥åŠå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>é‚£ä¹ˆï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿç®€å•æ¥è¯´ï¼Œ<code>@Configuration</code>æ³¨è§£å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ä¸€äº›ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚</p><p>å…·ä½“æ¥è¯´ï¼Œå½“Springå®¹å™¨æ‰«æåˆ°è¢«<code>@Configuration</code>æ³¨è§£æ ‡è®°çš„ç±»æ—¶ï¼Œå®ƒä¼šè§£æè¯¥ç±»ï¼Œå¹¶æ ¹æ®å…¶ä¸­çš„é…ç½®ä¿¡æ¯åˆ›å»ºç›¸åº”çš„Beanå®šä¹‰ã€‚è¿™äº›é…ç½®ä¿¡æ¯å¯ä»¥åŒ…æ‹¬<code>@Bean</code>æ³¨è§£æ ‡è®°çš„æ–¹æ³•ï¼Œç”¨äºå®šä¹‰Beançš„åˆ›å»ºå’Œåˆå§‹åŒ–é€»è¾‘ã€‚åŒæ—¶ï¼Œé…ç½®ç±»è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–æ³¨è§£ï¼Œå¦‚<code>@ComponentScan</code>ã€<code>@Import</code>ç­‰ï¼Œæ¥è¿›ä¸€æ­¥å®šä¹‰å’Œå¼•å…¥å…¶ä»–çš„Beanå®šä¹‰å’Œé…ç½®ã€‚</p><p>é…ç½®ç±»çš„ä¼˜åŠ¿åœ¨äºå®ƒæä¾›äº†æ›´åŠ çµæ´»ã€å¯è¯»æ€§é«˜çš„é…ç½®æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥åœ¨é…ç½®ç±»ä¸­ä½¿ç”¨Javaè¯­è¨€çš„ç‰¹æ€§ï¼Œå¦‚æ¡ä»¶åˆ¤æ–­ã€å¾ªç¯ç­‰ï¼Œæ¥åŠ¨æ€åˆ›å»ºå’Œé…ç½®Beanã€‚åŒæ—¶ï¼Œé…ç½®ç±»çš„ç±»å‹å®‰å…¨æ€§æ›´é«˜ï¼Œç¼–è¯‘å™¨å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ£€æµ‹é…ç½®é”™è¯¯å’Œç±»å‹ä¸åŒ¹é…çš„é—®é¢˜ã€‚</p><p>æ€»ç»“èµ·æ¥ï¼Œ<code>@Configuration</code>æ³¨è§£çš„æœ¬è´¨æ˜¯å‘Šè¯‰Springå®¹å™¨ï¼Œè¢«æ³¨è§£çš„ç±»æ˜¯ä¸€ä¸ªé…ç½®ç±»ï¼Œå®ƒåŒ…å«äº†ç”¨äºé…ç½®åº”ç”¨ç¨‹åºçš„Beanå®šä¹‰å’Œå…¶ä»–é…ç½®å…ƒç´ ã€‚é€šè¿‡é…ç½®ç±»ï¼Œæˆ‘ä»¬å¯ä»¥ä»¥Javaç±»çš„å½¢å¼æ¥å®šä¹‰å’Œç®¡ç†Springåº”ç”¨ç¨‹åºçš„é…ç½®ä¿¡æ¯ï¼Œæä¾›äº†æ›´åŠ ç›´è§‚ã€ç±»å‹å®‰å…¨å’Œå¯ç»´æŠ¤çš„é…ç½®æ–¹å¼ã€‚ç­‰åŒäºXMLé…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;context:component-scan</code>æ ‡ç­¾</p><h3 id="_3-1-åŸºæœ¬ä½¿ç”¨" tabindex="-1">3.1 åŸºæœ¬ä½¿ç”¨ï¼š <a class="header-anchor" href="#_3-1-åŸºæœ¬ä½¿ç”¨" aria-label="Permalink to &quot;3.1 åŸºæœ¬ä½¿ç”¨ï¼š&quot;">â€‹</a></h3><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//åŠ è½½é…ç½®Beanä¸Šï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">basePackages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;org.javatop.scan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">context</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">component</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">scan base</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=&quot;&quot;/</span></span></code></pre></div><h3 id="_3-2-æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨" tabindex="-1">3.2 æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨ï¼š <a class="header-anchor" href="#_3-2-æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨" aria-label="Permalink to &quot;3.2 æ’é™¤ã€åŒ…å«çš„ä½¿ç”¨ï¼š&quot;">â€‹</a></h3><h4 id="_1-æ’é™¤è¿‡æ»¤" tabindex="-1">1.æ’é™¤è¿‡æ»¤ï¼š <a class="header-anchor" href="#_1-æ’é™¤è¿‡æ»¤" aria-label="Permalink to &quot;1.æ’é™¤è¿‡æ»¤ï¼š&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:component-scan</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base-package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:exclude-filter</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assignable&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.bean.User&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:component-scan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>æ›¿æ¢ä¸ºï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">basePackages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;org.javatop.scan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                 excludeFilters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan.Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FilterType.ANNOTATION,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Service.class}),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                                   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan.Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FilterType.ASPECTJ,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">pattern</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*..User1&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  type = FilterType.ANNOTATION          value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .ASSIGNABLE_TYPE     value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .ASPECTJ             pattern   </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .REGEX               pattern</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .CUSTOM              value        */</span></span></code></pre></div><h4 id="_2-åŒ…å«è¿‡æ»¤" tabindex="-1">2.åŒ…å«è¿‡æ»¤ï¼š <a class="header-anchor" href="#_2-åŒ…å«è¿‡æ»¤" aria-label="Permalink to &quot;2.åŒ…å«è¿‡æ»¤ï¼š&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:component-scan</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> base-package</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> use-default-filters</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:include-filter</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> expression</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">context:component-scan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>æ›¿æ¢ä¸ºï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">basePackages</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;org.javatop.scan&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                 useDefaultFilters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                 includeFilters</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan.Filter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> FilterType.ANNOTATION,</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">value</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{Service.class})})</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  /*</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  type = FilterType.ANNOTATION          value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .ASSIGNABLE_TYPE     value</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .ASPECTJ             pattern   </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .REGEX               pattern</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                   .CUSTOM              value               */</span></span></code></pre></div><h2 id="_4-springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ" tabindex="-1">4. Springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ <a class="header-anchor" href="#_4-springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ" aria-label="Permalink to &quot;4. Springå·¥å‚åˆ›å»ºå¯¹è±¡çš„æ–¹å¼åˆ†æ&quot;">â€‹</a></h2><h3 id="_1-å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯" tabindex="-1">1. å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯ <a class="header-anchor" href="#_1-å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯" aria-label="Permalink to &quot;1. å¤šç§é…ç½®æ–¹å¼çš„åº”ç”¨åœºæ™¯&quot;">â€‹</a></h3><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505590.png" alt="image-20200706174301418"></p><h3 id="_2-é…ç½®ä¼˜å…ˆçº§" tabindex="-1">2. é…ç½®ä¼˜å…ˆçº§ <a class="header-anchor" href="#_2-é…ç½®ä¼˜å…ˆçº§" aria-label="Permalink to &quot;2. é…ç½®ä¼˜å…ˆçº§&quot;">â€‹</a></h3><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@ComponentåŠå…¶è¡ç”Ÿæ³¨è§£ &lt; @Bean &lt; é…ç½®æ–‡ä»¶beanæ ‡ç­¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ä¼˜å…ˆçº§é«˜çš„é…ç½®ä¼šè¦†ç›–ä¼˜å…ˆçº§ä½é…ç½® </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">public class User{</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">public User user(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  return new User();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;bean id=&quot;user&quot; class=&quot;xxx.User&quot;/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">é…ç½®è¦†ç›–æ¡ä»¶ï¼šidå€¼ ä¿æŒä¸€è‡´</span></span></code></pre></div><h3 id="_3-è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜" tabindex="-1">3. è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜ <a class="header-anchor" href="#_3-è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜" aria-label="Permalink to &quot;3. è§£å†³åŸºäºæ³¨è§£è¿›è¡Œé…ç½®çš„è€¦åˆé—®é¢˜&quot;">â€‹</a></h3><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!-- applicationContext.xml é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè¦†ç›– --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDAO&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.injection.UserDAOImplNew&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">12</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">//@ImportResource(&quot;applicationContext.xml&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">public class AppConfig4 {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    public UserDAO userDAO() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        return new UserDAOImpl();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@ImportResource(&quot;applicationContext.xml&quot;)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">public class AppConfig5{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h2 id="_5-æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯" tabindex="-1">5. æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯ <a class="header-anchor" href="#_5-æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯" aria-label="Permalink to &quot;5. æ•´åˆå¤šä¸ªé…ç½®ä¿¡æ¯&quot;">â€‹</a></h2><p>ä¸ºä»€ä¹ˆä¼šæœ‰å¤šä¸ªé…ç½®ä¿¡æ¯</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">æ‹†åˆ†å¤šä¸ªé…ç½®beançš„å¼€å‘ï¼Œæ˜¯ä¸€ç§æ¨¡å—åŒ–å¼€å‘çš„å½¢å¼ï¼Œä¹Ÿä½“ç°äº†é¢å‘å¯¹è±¡å„å¸å…¶èŒçš„è®¾è®¡æ€æƒ³</span></span></code></pre></div><p>å¤šé…ç½®ä¿¡æ¯æ•´åˆçš„æ–¹å¼</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¤šä¸ªé…ç½®Beançš„æ•´åˆ</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é…ç½®Beanä¸@Componentç›¸å…³æ³¨è§£çš„æ•´åˆ</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> é…ç½®Beanä¸SpringXMLé…ç½®æ–‡ä»¶çš„æ•´åˆ</span></span></code></pre></div><p>æ•´åˆå¤šç§é…ç½®éœ€è¦å…³æ³¨é‚£äº›è¦ç‚¹</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¦‚ä½•ä½¿å¤šé…ç½®çš„ä¿¡æ¯ æ±‡æ€»æˆä¸€ä¸ªæ•´ä½“</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¦‚ä½•å®ç°è·¨é…ç½®çš„æ³¨å…¥</span></span></code></pre></div><h3 id="_5-1-å¤šä¸ªé…ç½®beançš„æ•´åˆ" tabindex="-1">5.1 å¤šä¸ªé…ç½®Beançš„æ•´åˆ <a class="header-anchor" href="#_5-1-å¤šä¸ªé…ç½®beançš„æ•´åˆ" aria-label="Permalink to &quot;5.1 å¤šä¸ªé…ç½®Beançš„æ•´åˆ&quot;">â€‹</a></h3><h4 id="_1-base-packageè¿›è¡Œå¤šä¸ªé…ç½®beançš„æ•´åˆ" tabindex="-1">1.base-packageè¿›è¡Œå¤šä¸ªé…ç½®Beançš„æ•´åˆ <a class="header-anchor" href="#_1-base-packageè¿›è¡Œå¤šä¸ªé…ç½®beançš„æ•´åˆ" aria-label="Permalink to &quot;1.base-packageè¿›è¡Œå¤šä¸ªé…ç½®Beançš„æ•´åˆ&quot;">â€‹</a></h4><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505554.png" alt="image-20200707170421669"></p><p>é€šè¿‡ @Import(xxx.class)</p><p>æŠŠAppConfig1å½“ä½œä¸»é…ç½®Beanï¼Œåœ¨AppConfig1ä¸Šæ·»åŠ @Import(Appconfig2.class)ï¼Œå®Œæˆæ•´åˆ</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505739.png" alt="image-20200707170745814"></p><p>åœ¨å·¥å‚åˆ›å»ºæ—¶ï¼ŒæŒ‡å®šå¤šä¸ªé…ç½®Beançš„Classå¯¹è±¡ ã€äº†è§£ã€‘</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ApplicationContext ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppConfig1.class,AppConfig2.class);</span></span></code></pre></div><p>ä¸€ä¸ªé—®é¢˜ï¼šå¦‚ä½•è·¨é…ç½®è¿›è¡Œæ³¨å…¥ï¼Ÿ</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppConfig2.class)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //æŠŠè¦è·¨é…ç½®æ³¨å…¥çš„å¯¹è±¡ä½œä¸ºæœ¬é…ç½®Beançš„å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserDAO userDAO;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserServiceImpl userService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userDAO);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserDAO </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAOImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="_5-2-é…ç½®beanä¸-componentç›¸å…³æ³¨è§£çš„æ•´åˆ" tabindex="-1">5.2 é…ç½®Beanä¸@Componentç›¸å…³æ³¨è§£çš„æ•´åˆ <a class="header-anchor" href="#_5-2-é…ç½®beanä¸-componentç›¸å…³æ³¨è§£çš„æ•´åˆ" aria-label="Permalink to &quot;5.2 é…ç½®Beanä¸@Componentç›¸å…³æ³¨è§£çš„æ•´åˆ&quot;">â€‹</a></h3><p>é€šè¿‡ @ComponentScan(basePackages = &quot; &quot;) æ³¨è§£æ•´åˆï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAOImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ComponentScan</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserDAO userDAO;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserServiceImpl userService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userDAO);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ApplicationContext ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppConfig3.class);</span></span></code></pre></div><h3 id="_5-3-é…ç½®beanä¸é…ç½®æ–‡ä»¶æ•´åˆ" tabindex="-1">5.3 é…ç½®Beanä¸é…ç½®æ–‡ä»¶æ•´åˆ <a class="header-anchor" href="#_5-3-é…ç½®beanä¸é…ç½®æ–‡ä»¶æ•´åˆ" aria-label="Permalink to &quot;5.3 é…ç½®Beanä¸é…ç½®æ–‡ä»¶æ•´åˆ&quot;">â€‹</a></h3><p>ä½¿ç”¨ @ImportResource(â€œapplicationContext.xmlâ€) æ³¨è§£æ•´åˆï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//1. é—ç•™ç³»ç»Ÿçš„æ•´åˆ 2. é…ç½®è¦†ç›–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAOImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bean id</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDAO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> class</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.injection.UserDAOImpl&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Configuration</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">ImportResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;applicationContext.xml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AppConfig4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserDAO userDAO;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        UserServiceImpl userService </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUserDAO</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(userDAO);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> userService;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ApplicationContext ctx </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> AnnotationConfigApplicationContext</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(AppConfig4.class);</span></span></code></pre></div><h2 id="_6-é…ç½®beanåº•å±‚å®ç°åŸç†" tabindex="-1">6. é…ç½®Beanåº•å±‚å®ç°åŸç† <a class="header-anchor" href="#_6-é…ç½®beanåº•å±‚å®ç°åŸç†" aria-label="Permalink to &quot;6. é…ç½®Beanåº•å±‚å®ç°åŸç†&quot;">â€‹</a></h2><p>Springåœ¨é…ç½®Beanä¸­åŠ å…¥äº†@Configurationæ³¨è§£åï¼Œåº•å±‚å°±ä¼šé€šè¿‡Cglibçš„ä»£ç†æ–¹å¼ï¼Œæ¥è¿›è¡Œå¯¹è±¡ç›¸å…³çš„é…ç½®ã€å¤„ç†</p><p><img src="https://gaoziman.oss-cn-hangzhou.aliyuncs.com/img/202305291505319.png" alt="image-20200709114200371"></p><p>åœ¨Springæ¡†æ¶ä¸­ï¼Œé…ç½®Beançš„åº•å±‚å®ç°åŸç†ä¸»è¦æ¶‰åŠåˆ°ä¸¤ä¸ªæ ¸å¿ƒæ¦‚å¿µï¼šBeanå®šä¹‰å’ŒBeanå·¥å‚ã€‚</p><ol><li><p><strong>Beanå®šä¹‰(Bean Definition)ï¼š</strong> Beanå®šä¹‰æ˜¯æè¿°Beançš„å…ƒæ•°æ®ï¼Œå®ƒåŒ…å«äº†Beançš„ç±»åã€å±æ€§å€¼ã€æ„é€ å‡½æ•°å‚æ•°ã€ç”Ÿå‘½å‘¨æœŸå›è°ƒç­‰ä¿¡æ¯ã€‚åœ¨Springä¸­ï¼Œæ¯ä¸€ä¸ªè¢«ç®¡ç†çš„Beanéƒ½éœ€è¦æœ‰ä¸€ä¸ªå¯¹åº”çš„Beanå®šä¹‰ã€‚</p><p>åœ¨é…ç½®Beanæ—¶ï¼Œå¯ä»¥ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥å®šä¹‰Beanã€‚ä»¥ä¸‹æ˜¯ä¸€äº›å¸¸è§çš„é…ç½®æ–¹å¼ï¼š</p><ul><li>XMLé…ç½®æ–‡ä»¶ï¼šä½¿ç”¨<code>&lt;bean&gt;</code>æ ‡ç­¾æ¥å®šä¹‰Beanï¼Œå¯ä»¥æŒ‡å®šBeançš„ç±»åã€å±æ€§å€¼ã€æ„é€ å‡½æ•°å‚æ•°ç­‰ã€‚</li><li>Javaæ³¨è§£ï¼šä½¿ç”¨æ³¨è§£å¦‚<code>@Component</code>ã€<code>@Service</code>ã€<code>@Repository</code>ã€<code>@Controller</code>ç­‰æ¥æ ‡è®°Beanç±»ï¼ŒSpringä¼šè‡ªåŠ¨æ‰«æå¹¶è§£æè¿™äº›æ³¨è§£ï¼Œå°†å…¶è½¬åŒ–ä¸ºBeanå®šä¹‰ã€‚</li><li>Javaé…ç½®ç±»ï¼šä½¿ç”¨<code>@Configuration</code>æ³¨è§£çš„ç±»æ¥å®šä¹‰Beanï¼Œä½¿ç”¨<code>@Bean</code>æ³¨è§£æ¥æ ‡è®°æ–¹æ³•ï¼Œæ–¹æ³•çš„è¿”å›å€¼å°†ä½œä¸ºBeançš„å®ä¾‹ã€‚</li></ul><p>æ— è®ºæ˜¯ä½¿ç”¨XMLé…ç½®æ–‡ä»¶ã€æ³¨è§£è¿˜æ˜¯Javaé…ç½®ç±»ï¼Œæœ€ç»ˆéƒ½ä¼šå°†é…ç½®ä¿¡æ¯è§£ææˆBeanå®šä¹‰å¯¹è±¡ã€‚</p></li><li><p><strong>Beanå·¥å‚(Bean Factory)ï¼š</strong> Beanå·¥å‚æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒå®¹å™¨ï¼Œè´Ÿè´£ç®¡ç†å’Œåˆ›å»ºBeançš„å®ä¾‹ã€‚å®ƒæ˜¯ä¸€ä¸ªå·¥å‚æ¨¡å¼çš„å®ç°ï¼Œåœ¨åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼Œæ ¹æ®Beanå®šä¹‰åˆ›å»ºå’Œç®¡ç†Beanå®ä¾‹ã€‚</p><p>åœ¨Springä¸­ï¼Œä½¿ç”¨<code>ApplicationContext</code>æ¥å£æ¥è¡¨ç¤ºBeanå·¥å‚ã€‚<code>ApplicationContext</code>æ¥å£æ˜¯Beanå·¥å‚çš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„æ–¹æ³•æ¥è·å–å’Œç®¡ç†Beanã€‚</p><p>å½“åº”ç”¨ç¨‹åºå¯åŠ¨æ—¶ï¼ŒSpringå®¹å™¨ä¼šè¯»å–é…ç½®æ–‡ä»¶æˆ–æ‰«ææ³¨è§£ï¼Œè§£æBeanå®šä¹‰å¹¶åˆ›å»ºå¯¹åº”çš„Beanå®ä¾‹ã€‚åœ¨åˆ›å»ºBeanå®ä¾‹æ—¶ï¼ŒBeanå·¥å‚ä¼šæ ¹æ®Beanå®šä¹‰ä¸­çš„ä¿¡æ¯è¿›è¡Œä»¥ä¸‹æ“ä½œï¼š</p><ul><li>å®ä¾‹åŒ–Beanï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ç±»åï¼Œä½¿ç”¨Javaåå°„æœºåˆ¶åˆ›å»ºBeançš„å®ä¾‹ã€‚</li><li>å±æ€§æ³¨å…¥ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„å±æ€§å€¼ï¼Œå°†å¯¹åº”çš„å€¼æ³¨å…¥åˆ°Beanå®ä¾‹ä¸­ã€‚</li><li>ä¾èµ–æ³¨å…¥ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ä¾èµ–å…³ç³»ï¼Œå°†ä¾èµ–çš„Beanæ³¨å…¥åˆ°å½“å‰Beanå®ä¾‹ä¸­ã€‚</li><li>ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼šæ ¹æ®Beanå®šä¹‰ä¸­æŒ‡å®šçš„ç”Ÿå‘½å‘¨æœŸå›è°ƒæ–¹æ³•ï¼Œè°ƒç”¨ç›¸åº”çš„æ–¹æ³•æ¥åˆå§‹åŒ–å’Œé”€æ¯Beanå®ä¾‹ã€‚</li></ul><p><strong>Beanå·¥å‚é€šè¿‡ä½¿ç”¨Beanå®šä¹‰å’Œåå°„æœºåˆ¶ï¼Œå®ç°äº†Beançš„åŠ¨æ€åˆ›å»ºå’Œç®¡ç†ã€‚</strong></p></li></ol><p>é…ç½®Beançš„åº•å±‚å®ç°åŸç†ä¸»è¦æ¶‰åŠBeanå®šä¹‰å’ŒBeanå·¥å‚ã€‚Beanå®šä¹‰æè¿°äº†Beançš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ç±»åã€å±æ€§å€¼ç­‰ä¿¡æ¯ã€‚Beanå·¥å‚è´Ÿè´£ç®¡ç†å’Œåˆ›å»ºBeançš„å®ä¾‹ï¼Œæ ¹æ®Beanå®šä¹‰åŠ¨æ€åˆ›å»ºBeanï¼Œå¹¶è¿›è¡Œå±æ€§æ³¨å…¥ã€ä¾èµ–æ³¨å…¥å’Œç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚è¿™ç§åŸºäºBeanå®šä¹‰å’Œå·¥å‚æ¨¡å¼çš„å®ç°æ–¹å¼ï¼Œä½¿å¾—Springæ¡†æ¶å…·æœ‰äº†çµæ´»æ€§ã€å¯æ‰©å±•æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p><h2 id="_7-å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³" tabindex="-1">7. å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³ <a class="header-anchor" href="#_7-å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³" aria-label="Permalink to &quot;7. å››ç»´ä¸€ä½“çš„å¼€å‘æ€æƒ³&quot;">â€‹</a></h2><h3 id="_7-1-ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“" tabindex="-1">7.1 ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“ <a class="header-anchor" href="#_7-1-ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“" aria-label="Permalink to &quot;7.1 ä»€ä¹ˆæ˜¯å››ç»´ä¸€ä½“&quot;">â€‹</a></h3><p>å››ç»´ä¸€ä½“&quot;æ˜¯æŒ‡Springæ¡†æ¶çš„å››ä¸ªæ ¸å¿ƒç»´åº¦ï¼Œå®ƒä»¬æ˜¯ï¼šä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ã€é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ã€æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ã€å’Œè‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ã€‚</p><ol><li>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼šä¾èµ–æ³¨å…¥æ˜¯Springæ¡†æ¶çš„æ ¸å¿ƒç‰¹æ€§ä¹‹ä¸€ã€‚å®ƒé€šè¿‡å°†å¯¹è±¡ä¹‹é—´çš„ä¾èµ–å…³ç³»çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™æ¡†æ¶æ¥å®ç°è§£è€¦å’Œçµæ´»æ€§ã€‚åœ¨Springä¸­ï¼Œæˆ‘ä»¬å°†ä¾èµ–å…³ç³»å£°æ˜åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ–è€…ä½¿ç”¨æ³¨è§£æ¥è‡ªåŠ¨æ³¨å…¥ä¾èµ–å¯¹è±¡ã€‚</li><li>é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹æ˜¯ä¸€ç§é€šè¿‡å°†æ¨ªåˆ‡å…³æ³¨ç‚¹ï¼ˆä¾‹å¦‚æ—¥å¿—è®°å½•ã€äº‹åŠ¡ç®¡ç†ã€å®‰å…¨æ€§ç­‰ï¼‰ä¸æ ¸å¿ƒä¸šåŠ¡é€»è¾‘åˆ†ç¦»çš„ç¼–ç¨‹æ–¹å¼ã€‚Springæ¡†æ¶é€šè¿‡AOPæ¨¡å—æä¾›äº†å¯¹é¢å‘åˆ‡é¢ç¼–ç¨‹çš„æ”¯æŒï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿæ›´å®¹æ˜“åœ°å®ç°æ¨ªåˆ‡å…³æ³¨ç‚¹çš„åŠŸèƒ½ã€‚</li><li>æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ï¼šæ§åˆ¶åè½¬æ˜¯æŒ‡å°†å¯¹è±¡çš„åˆ›å»ºå’Œç®¡ç†äº¤ç»™æ¡†æ¶æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç”±å¼€å‘äººå‘˜æ‰‹åŠ¨å®ä¾‹åŒ–å¯¹è±¡ã€‚åœ¨Springä¸­ï¼Œæ§åˆ¶åè½¬é€šè¿‡IoCå®¹å™¨æ¥å®ç°ï¼Œå®ƒè´Ÿè´£ç®¡ç†å’Œåˆ›å»ºåº”ç”¨ç¨‹åºä¸­çš„å¯¹è±¡ï¼Œå¹¶åœ¨éœ€è¦æ—¶å°†è¿™äº›å¯¹è±¡æ³¨å…¥åˆ°å…¶ä»–å¯¹è±¡ä¸­ã€‚</li><li>è‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ï¼šè‡ªåŠ¨åŒ–æ¨¡å—åŒ–æ˜¯æŒ‡å°†åº”ç”¨ç¨‹åºåˆ’åˆ†ä¸ºç‹¬ç«‹çš„ã€å¯é‡ç”¨çš„ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„èŒè´£å’Œæ¥å£ã€‚Springæ¡†æ¶é¼“åŠ±ä½¿ç”¨ç»„ä»¶åŒ–çš„æ–¹å¼è¿›è¡Œå¼€å‘ï¼Œé€šè¿‡æ³¨è§£ã€é…ç½®æ–‡ä»¶ç­‰æ–¹å¼å°†è¿™äº›ç»„ä»¶è¿›è¡Œç®¡ç†å’Œç»„è£…ã€‚</li></ol><p>è¿™å››ä¸ªç»´åº¦ç›¸äº’å…³è”ï¼Œå…±åŒæ„æˆäº†Springæ¡†æ¶çš„æ ¸å¿ƒç†å¿µå’ŒåŠŸèƒ½ã€‚å®ƒä»¬å¸®åŠ©å¼€å‘äººå‘˜å®ç°ä»£ç çš„æ¾è€¦åˆã€å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæé«˜å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Springå¼€å‘ä¸€ä¸ªåŠŸèƒ½çš„4ç§å½¢å¼ï¼Œè™½ç„¶å¼€å‘æ–¹å¼ä¸åŒï¼Œä½†æ˜¯æœ€ç»ˆæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŸºäºschema</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŸºäºç‰¹å®šåŠŸèƒ½æ³¨è§£</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŸºäºåŸå§‹&lt;bean</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">4.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŸºäº@Beanæ³¨è§£</span></span></code></pre></div><h3 id="_7-2-å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹" tabindex="-1">7.2 å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹ <a class="header-anchor" href="#_7-2-å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹" aria-label="Permalink to &quot;7.2 å››ç»´ä¸€ä½“çš„å¼€å‘æ¡ˆä¾‹&quot;">â€‹</a></h3><ol><li>ä¾èµ–æ³¨å…¥ï¼ˆDependency Injectionï¼‰ï¼š</li></ol><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> interface</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Override</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> addUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // æ·»åŠ ç”¨æˆ·é€»è¾‘</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Controller</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserController</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UserService userService;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PostMapping</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">createUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        userService.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(user);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;redirect:/users&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>UserService</code>æ¥å£å’Œå®ƒçš„å®ç°ç±»<code>UserServiceImpl</code>ï¼ŒåŒæ—¶åœ¨<code>UserController</code>ä¸­ä½¿ç”¨<code>@Autowired</code>æ³¨è§£å°†<code>UserService</code>è‡ªåŠ¨æ³¨å…¥ã€‚</p><p>2.é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ˆAspect-Oriented Programmingï¼‰ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> LoggingAspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Before</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;execution(* com.example.controller.*.*(..))&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logBefore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JoinPoint </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">joinPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Before method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> joinPoint.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSignature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">After</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;execution(* com.example.controller.*.*(..))&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> logAfter</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(JoinPoint </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">joinPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;After method: &quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> joinPoint.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getSignature</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªåˆ‡é¢ç±»<code>LoggingAspect</code>ï¼Œä½¿ç”¨<code>@Before</code>å’Œ<code>@After</code>æ³¨è§£å®šä¹‰äº†åœ¨æ–¹æ³•æ‰§è¡Œå‰åæ‰“å°æ—¥å¿—çš„é€»è¾‘ã€‚</p><p>3.æ§åˆ¶åè½¬ï¼ˆInversion of Controlï¼‰ï¼š</p><p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰Beançš„å®ä¾‹åŒ–å’Œé…ç½®ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œ<code>application-context.xml</code>æ–‡ä»¶ï¼š</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">beans</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> xmlns</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.springframework.org/schema/beans&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       xmlns:xsi</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">       xsi:schemaLocation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userService&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.example.service.UserServiceImpl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userController&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.controller.UserController&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userService&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userService&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">beans</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>åœ¨ä¸Šè¿°é…ç½®æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†<code>userService</code>å’Œ<code>userController</code>çš„å®ä¾‹åŒ–å’Œä¾èµ–å…³ç³»ã€‚</p><p>4.è‡ªåŠ¨åŒ–æ¨¡å—åŒ–ï¼ˆComponent-Based Developmentï¼‰ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Repository</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserRepository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> saveUser</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(User </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">user</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // ä¿å­˜ç”¨æˆ·åˆ°æ•°æ®åº“</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ª<code>UserRepository</code>ç±»å¹¶ä½¿ç”¨<code>@Repository</code>æ³¨è§£å°†å…¶æ ‡è®°ä¸ºä»“åº“ç»„ä»¶ã€‚</p><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;context:property-placehoder</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @PropertySource  ã€æ¨èã€‘</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &lt;bean id=&quot;&quot; class=&quot;PropertySourcePlaceholderConfigure&quot;/&gt;</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">4.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> @Bean            ã€æ¨èã€‘</span></span></code></pre></div><h2 id="_8-çº¯æ³¨è§£ç¼–ç¨‹" tabindex="-1">8.çº¯æ³¨è§£ç¼–ç¨‹ <a class="header-anchor" href="#_8-çº¯æ³¨è§£ç¼–ç¨‹" aria-label="Permalink to &quot;8.çº¯æ³¨è§£ç¼–ç¨‹&quot;">â€‹</a></h2><h3 id="_1-çº¯æ³¨è§£ç‰ˆaopç¼–ç¨‹" tabindex="-1">1. çº¯æ³¨è§£ç‰ˆAOPç¼–ç¨‹ <a class="header-anchor" href="#_1-çº¯æ³¨è§£ç‰ˆaopç¼–ç¨‹" aria-label="Permalink to &quot;1. çº¯æ³¨è§£ç‰ˆAOPç¼–ç¨‹&quot;">â€‹</a></h3><h4 id="_1-æ­å»ºç¯å¢ƒ" tabindex="-1">1. æ­å»ºç¯å¢ƒ <a class="header-anchor" href="#_1-æ­å»ºç¯å¢ƒ" aria-label="Permalink to &quot;1. æ­å»ºç¯å¢ƒ&quot;">â€‹</a></h4><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åˆ›å»ºé…ç½®Bean </span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å¼€å¯æ³¨è§£æ‰«æ @ComponentScan()</span></span></code></pre></div><h4 id="_2-å¼€å‘æ­¥éª¤" tabindex="-1">2. å¼€å‘æ­¥éª¤ <a class="header-anchor" href="#_2-å¼€å‘æ­¥éª¤" aria-label="Permalink to &quot;2. å¼€å‘æ­¥éª¤&quot;">â€‹</a></h4><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŸå§‹å¯¹è±¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Service</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(@</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserServiceImpl</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> implements</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> UserService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åˆ›å»ºåˆ‡é¢ç±» ï¼ˆé¢å¤–åŠŸèƒ½ åˆ‡å…¥ç‚¹ ç»„è£…åˆ‡é¢ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Aspect</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyAspect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Around</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;execution(* login(..))&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Object </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">arround</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(ProceedingJoinPoint </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">joinPoint</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">throws</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Throwable {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            System.out.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">println</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;----aspect log ------&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Object ret </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> joinPoint.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">proceed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ret;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Springçš„é…ç½®æ–‡ä»¶ä¸­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">   &lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">aop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">aspectj</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">autoproxy </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   æ›¿æ¢ä¸ºï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">EnableAspectjAutoProxy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ---&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> åŠ åœ¨é…ç½®Beanä¸Š</span></span></code></pre></div><h4 id="_3-æ³¨è§£aopç»†èŠ‚åˆ†æ" tabindex="-1">3. æ³¨è§£AOPç»†èŠ‚åˆ†æ <a class="header-anchor" href="#_3-æ³¨è§£aopç»†èŠ‚åˆ†æ" aria-label="Permalink to &quot;3. æ³¨è§£AOPç»†èŠ‚åˆ†æ&quot;">â€‹</a></h4><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ä»£ç†åˆ›å»ºæ–¹å¼çš„åˆ‡æ¢ JDK Cglib </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   &lt;aop:aspectj-autoproxy proxy-target-class=true|false /&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @EnableAspectjAutoProxy(proxyTargetClass)</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> æ³¨æ„ï¼šSpringBooté»˜è®¤æŠŠ@EnableAspectjAutoProxyè®¾ç½®å¥½äº†ï¼Œä»¥åä½¿ç”¨SpringBootï¼Œè¿›è¡ŒAOPå¼€å‘æ—¶ï¼Œä¸éœ€è¦é¢å¤–è®¾ç½®ã€‚ </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Spring AOP ä»£ç†é»˜è®¤å®ç° JDK  SpringBOOT AOP ä»£ç†é»˜è®¤å®ç° Cglib</span></span></code></pre></div><h3 id="_2-çº¯æ³¨è§£ç‰ˆspring-mybatisæ•´åˆ" tabindex="-1">2. çº¯æ³¨è§£ç‰ˆSpring+MyBatisæ•´åˆ <a class="header-anchor" href="#_2-çº¯æ³¨è§£ç‰ˆspring-mybatisæ•´åˆ" aria-label="Permalink to &quot;2. çº¯æ³¨è§£ç‰ˆSpring+MyBatisæ•´åˆ&quot;">â€‹</a></h3><h4 id="_2-1-åŸºç¡€é…ç½®-é…ç½®bean" tabindex="-1">2.1 åŸºç¡€é…ç½® ï¼ˆé…ç½®Beanï¼‰ <a class="header-anchor" href="#_2-1-åŸºç¡€é…ç½®-é…ç½®bean" aria-label="Permalink to &quot;2.1 åŸºç¡€é…ç½® ï¼ˆé…ç½®Beanï¼‰&quot;">â€‹</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1. è¿æ¥æ± </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  &lt;!--è¿æ¥æ± --&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSource&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.alibaba.druid.pool.DruidDataSource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;driverClassName&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;com.mysql.jdbc.Driver&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;url&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;jdbc:mysql://localhost:3306/Leo?useSSL=false&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;username&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;password&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   public DataSource dataSource(){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      DruidDataSource dataSource = new DruidDataSource();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dataSource.setDriverClassName(&quot;&quot;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      dataSource.setUrl();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      return dataSource;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2. SqlSessionFactoryBean</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    &lt;!--åˆ›å»ºSqlSessionFactory SqlSessionFactoryBean--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqlSessionFactoryBean&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.mybatis.spring.SqlSessionFactoryBean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSource&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;typeAliasesPackage&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.entity&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mapperLocations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;classpath:org.javatop.mapper/*Mapper.xml&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    public SqlSessionFactoryBean sqlSessionFactoryBean(DataSource dataSource){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         SqlSessionFactoryBean sqlSessionFactoryBean = new SqlSessionFactoryBean();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         sqlSessionFactoryBean.setDataSource(dataSource);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         sqlSessionFactoryBean.setTypeAliasesPackage(&quot;&quot;);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         ...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         return sqlSessionFactoryBean;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3. MapperScannerConfigure </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   &lt;!--åˆ›å»ºDAOå¯¹è±¡ MapperScannerConfigure--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scanner&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.mybatis.spring.mapper.MapperScannerConfigurer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqlSessionFactoryBeanName&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;sqlSessionFactoryBean&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;basePackage&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.dao&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @MapperScan(basePackages={&quot;org.javatop.dao&quot;}) ---&gt; é…ç½®beanå®Œæˆ</span></span></code></pre></div><h4 id="_2-2-ç¼–ç " tabindex="-1">2.2 ç¼–ç  <a class="header-anchor" href="#_2-2-ç¼–ç " aria-label="Permalink to &quot;2.2 ç¼–ç &quot;">â€‹</a></h4><div class="language-markdown vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">markdown</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">1.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> å®ä½“</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">2.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> è¡¨</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">3.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DAOæ¥å£</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">4.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Mapperæ–‡ä»¶</span></span></code></pre></div><h4 id="_2-3-ç»†èŠ‚åˆ†æ" tabindex="-1">2.3 ç»†èŠ‚åˆ†æï¼š <a class="header-anchor" href="#_2-3-ç»†èŠ‚åˆ†æ" aria-label="Permalink to &quot;2.3 ç»†èŠ‚åˆ†æï¼š&quot;">â€‹</a></h4><p>MapperLocationsç¼–ç æ—¶é€šé…çš„å†™æ³•</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">//è®¾ç½®Mapperæ–‡ä»¶çš„è·¯å¾„ è¿™ç§æ–¹å¼åªèƒ½è®¾ç½®ä¸€ä¸ªæ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Resource..);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Resource resouce </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassPathResouce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UserDAOMapper.xml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ClassPathResource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;UserDAOMapper.xml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span></code></pre></div><p>xmlè®¾ç½®ä¸€ç»„Mapperæ–‡ä»¶ï¼š</p><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mapperLocations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">       &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;classpath:org.javatop.mapper/*Mapper.xml&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>javaä»£ç è®¾ç½®ä¸€ç»„Mapperæ–‡ä»¶ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ResourcePatternResolver resolver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PathMatchingResourcePatternResolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] resources </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.mapper/*Mapper.xml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resources)</span></span></code></pre></div><h4 id="_2-4-é…ç½®beanæ•°æ®è€¦åˆçš„é—®é¢˜" tabindex="-1">2.4 é…ç½®Beanæ•°æ®è€¦åˆçš„é—®é¢˜ <a class="header-anchor" href="#_2-4-é…ç½®beanæ•°æ®è€¦åˆçš„é—®é¢˜" aria-label="Permalink to &quot;2.4 é…ç½®Beanæ•°æ®è€¦åˆçš„é—®é¢˜&quot;">â€‹</a></h4><p>æå–propertiesæ–‡ä»¶ï¼š</p><div class="language-properties vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">properties</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.driverClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = com.mysql.cj.jdbc.Driver</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.url</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = jdbc:mysql://localhost:3306/Leo?</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">useSSL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=false</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.username</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = root</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.password</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = root</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.typeAliasesPackages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = org.javatop.mybatis</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">mybatis.mapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> = org.javatop.mapper/*Mapper.xml</span></span></code></pre></div><p>javaä»£ç ä¸­è·å–ï¼š</p><div class="language-java vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Component</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">PropertySource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;classpath:mybatis.properties&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MybatisProperties</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.driverClassName}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String driverClassName;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.url}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String url;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.username}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String username;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.password}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String password;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.typeAliasesPackages}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String typeAliasesPackages;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Value</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;\${mybatis.mapperLocations}&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> String mapperLocations;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> MyBatisAutoConfiguration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Autowired</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      private</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MybatisProperties mybatisProperties;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> DataSource </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          DruidDataSource dataSource </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DruidDataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDriverClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getDriverClassName</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUrl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setUsername</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getUsername</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dataSource.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getPassword</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> dataSource;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      @</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Bean</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SqlSessionFactoryBean </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sqlSessionFactoryBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(DataSource </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">dataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          SqlSessionFactoryBean sqlSessionFactoryBean </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> SqlSessionFactoryBean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setDataSource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(dataSource);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setTypeAliasesPackage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getTypeAliasesPackages</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          //sqlSessionFactoryBean.setMapperLocations(new ClassPathResource(&quot;UserDAOMapper.xml&quot;));</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              ResourcePatternResolver resolver </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PathMatchingResourcePatternResolver</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">              Resource</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[] resources </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> resolver.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getResources</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(mybatisProperties.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getMapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              sqlSessionFactoryBean.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setMapperLocations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(resources);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">catch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (IOException </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">e</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              e.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">printStackTrace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">          return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sqlSessionFactoryBean;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre></div><h3 id="_3-çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹" tabindex="-1">3. çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹ï¼š <a class="header-anchor" href="#_3-çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹" aria-label="Permalink to &quot;3. çº¯æ³¨è§£ç‰ˆäº‹åŠ¡ç¼–ç¨‹ï¼š&quot;">â€‹</a></h3><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1. åŸå§‹å¯¹è±¡ XXXService</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userService&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.javatop.service.UserServiceImpl&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">     &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDAO&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;userDAO&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   public class UserServiceImpl implements UserService{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         @Autowired</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">         private UserDAO userDAO;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2. é¢å¤–åŠŸèƒ½</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   &lt;!--DataSourceTransactionManager--&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSourceTransactionManager&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;org.springframework.jdbc.datasource.DataSourceTransactionManager&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">property</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSource&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ref</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSource&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    &lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">bean</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @Bean</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    public DataSourceTransactionManager dataSourceTransactionManager(DataSource dataSource){</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          DataSourceTransactionManager dstm = new DataSourceTransactionManager();</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          dstm.setDataSource(dataSource);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">          return dstm </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">3. äº‹åŠ¡å±æ€§</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @Transactional</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    @Service</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    public class UserServiceImpl implements UserService {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        @Autowired</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        private UserDAO userDAO;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">4. åŸºäºSchemaçš„äº‹åŠ¡é…ç½® </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   &lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tx:annotation-driven</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> transaction-manager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dataSourceTransactionManager&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">/&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">   @EnableTransactionManager ---&gt; é…ç½®Bean</span></span></code></pre></div><h2 id="_9-æ€»ç»“" tabindex="-1">9.æ€»ç»“ <a class="header-anchor" href="#_9-æ€»ç»“" aria-label="Permalink to &quot;9.æ€»ç»“&quot;">â€‹</a></h2><p>ä»¥ä¸Šä¾¿æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹ï¼Œæœ¬äººæ‰ç–å­¦æµ…ï¼Œæ–‡ç« æœ‰ä»€ä¹ˆé”™è¯¯çš„åœ°æ–¹ï¼Œæ¬¢è¿å¤§ä½¬ä»¬æ‰¹è¯„æŒ‡æ­£ï¼æˆ‘æ˜¯<strong>Leo</strong>ï¼Œä¸€ä¸ªåœ¨äº’è”ç½‘è¡Œä¸šçš„å°ç™½ï¼Œç«‹å¿—æˆä¸ºæ›´å¥½çš„è‡ªå·±ã€‚</p><p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº<strong>Leo</strong>ï¼Œå¯ä»¥å…³æ³¨å…¬ä¼—å·-ç¨‹åºå‘˜Leoï¼Œåé¢æ–‡ç« ä¼šé¦–å…ˆåŒæ­¥è‡³å…¬ä¼—å·ã€‚</p>`,156)]))}const o=i(l,[["render",t]]);export{g as __pageData,o as default};
